{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 14dc03b23b35acddac86","webpack:///./src/EventEmitter.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/common.js","webpack:///./node_modules/_buffer@4.9.1@buffer/index.js","webpack:///./src/http-parser.js","webpack:///./node_modules/_util@0.10.3@util/util.js","webpack:///./src/errors.js","webpack:///./src/connection.js","webpack:///./src/command.js","webpack:///./node_modules/_assert@1.4.1@assert/assert.js","webpack:///./node_modules/_process@0.11.10@process/browser.js","webpack:///./src/obuf.js","webpack:///./src/http_outgoing.js","webpack:///./src/http_ws.js","webpack:///./src/service_command.js","webpack:///./node_modules/_util@0.10.3@util/support/isBufferBrowser.js","webpack:///./node_modules/_inherits@2.0.3@inherits/inherits_browser.js","webpack:///./src/http_incoming.js","webpack:///./node_modules/_base64-js@1.2.1@base64-js/index.js","webpack:///./node_modules/_ieee754@1.1.8@ieee754/index.js","webpack:///./node_modules/_isarray@1.0.0@isarray/index.js","webpack:///./src/service_response.js","webpack:///./node_modules/_timers-browserify@2.0.4@timers-browserify/main.js","webpack:///./node_modules/_setimmediate@1.0.5@setimmediate/setImmediate.js","webpack:///./src/client_command.js","webpack:///./src/client_request.js","webpack:///./node_modules/_url@0.11.0@url/url.js","webpack:///./node_modules/_punycode@1.4.1@punycode/punycode.js","webpack:///(webpack)/buildin/module.js","webpack:///./node_modules/_url@0.11.0@url/util.js","webpack:///./node_modules/_querystring-es3@0.2.1@querystring-es3/index.js","webpack:///./node_modules/_querystring-es3@0.2.1@querystring-es3/decode.js","webpack:///./node_modules/_querystring-es3@0.2.1@querystring-es3/encode.js","webpack:///./node_modules/_js-base64@2.3.2@js-base64/base64.js","webpack:///./src/client.js"],"names":["exports","EventEmitter","proto","prototype","originalGlobalValue","indexOfListener","listeners","listener","i","length","alias","name","aliasClosure","apply","arguments","getListeners","evt","events","_getEvents","response","key","RegExp","hasOwnProperty","test","flattenListeners","flatListeners","push","getListenersAsObject","Array","isValidListener","addListener","TypeError","listenerIsWrapped","once","on","addOnceListener","defineEvent","defineEvents","evts","removeListener","index","splice","off","addListeners","manipulateListeners","removeListeners","remove","value","single","multiple","call","removeEvent","type","_events","removeAllListeners","emitEvent","args","listenersMap","slice","_getOnceReturnValue","trigger","emit","setOnceReturnValue","_onceReturnValue","noConflict","define","module","timers","require","STATUS_CODES","dateCache","utcDate","d","Date","toUTCString","enroll","getMilliseconds","_unrefActive","_onTimeout","undefined","validTokens","checkIsHttpToken","val","charCodeAt","validHdrChars","checkInvalidHeaderChar","ab2str","buf","String","fromCharCode","Uint8Array","str2ab","str","ArrayBuffer","bufView","strLen","outHeadersKey","Symbol","_checkInvalidHeaderChar","_checkIsHttpToken","chunkExpression","continueExpression","CRLF","debug","assert","HTTPParser","ok","REQUEST","RESPONSE","state","info","headers","upgrade","trailers","line","isChunked","connection","headerSize","body_bytes","isUserCall","hadError","maxHeaderSize","kOnHeaders","kOnHeadersComplete","kOnBody","kOnMessageComplete","compatMode0_12","Object","defineProperty","get","methods","HttpMethods","reinitialize","close","pause","resume","_compatMode0_11","getAsyncId","headerState","REQUEST_LINE","RESPONSE_LINE","HEADER","execute","chunk","start","offset","end","err","Error","stateFinishAllowed","BODY_RAW","finish","userCall","consume","unconsume","getCurrentBuffer","self","ret","nextRequest","consumeLine","toString","charAt","substr","headerExp","headerContinueExp","parseHeader","indexOf","parseErrorCode","match","exec","k","matchContinue","requestExp","method","url","versionMajor","versionMinor","responseExp","statusCode","statusMessage","shouldKeepAlive","hasContentLength","toLowerCase","skipBody","BODY_CHUNKHEAD","parseInt","BODY_CHUNK","Math","min","BODY_CHUNKEMPTYLINE","equal","BODY_CHUNKTRAILERS","BODY_SIZED","forEach","set","to","code","kCode","messages","Map","util","makeNodeError","Base","message","AssertionError","options","inspect","actual","operator","expected","generatedMessage","captureStackTrace","stackStartFunction","strictEqual","msg","fmt","format","unshift","E","sym","RangeError","s","bufferOutOfBounds","servers","enc","originalStatusCode","id","max","protocol","invalidArgType","len","invalidChar","expectedProtocol","oneOf","missingArgs","size","determiner","includes","split","isArray","names","map","join","a","thing","isWriting","field","Connection","socket","app","m","_parse","data","last","scommand","request","cmd","ccommand","maxHeaderPairs","setFlush","maxHeadersCount","encoding","send","_CONLON","_CR","_LF","n","pattern","arr","Number","sconn_list","cconn_list","getConnection","arg","addConnection","conn","removeConnection","_request_counter","cb","client_request","getHeader","kOnExecute","Command","c","itype","Id","_incoming","_outgoing","_type","_parser","_createParser","_obuf","_onParserExecuteCommon","parser","_headers","_url","parserOnHeaders","bind","parserOnHeadersComplete","parserOnBody","parserOnMessageComplete","onIncoming","_parserOnIncoming","_onParserExecute","req","keepAlive","prefix","append","concat","incoming","httpVersionMajor","httpVersionMinor","httpVersion","_addHeaderLines","outgoing","upgrading","b","stream","_dumped","complete","MAX_SIZE_COMMAND_LINE","OBuf","poolSize","_buf","alloc","_wrpos","_chunkId","_finish","_prefix","_socket","flush","byteLength","wrable_size","write","copy","chunkid","cline","fill","Common","HttpWsError","RE_FIELDS","RE_CONN_VALUES","RE_TE_CHUNKED","isCookieField","ch","noopPendingOutput","amount","OutgoingMessage","output","outputEncodings","outputCallbacks","outputSize","writable","_last","chunkedEncoding","useChunkedEncodingByDefault","sendDate","_removedConnection","_removedContLen","_removedTE","_contentLength","_hasBody","_trailer","finished","_headerSent","_header","_onPendingData","_closed","headersMap","keys","l","callback","header","_writeRaw","_flushOutput","firstLine","connUpgrade","contLen","te","date","expect","trailer","j","entry","storeHeader","shouldSendKeepAlive","agent","_send","validateHeader","create","write_","escapeHeaderValue","_implicitHeader","onFinish","outputLength","getHeaders","out","outmsg","replace","validate","matchHeader","matchConnValue","sawClose","fromEnd","writeAfterEndNT","Server","requestListener","_requestListener","server","connect","createServer","httpws","Buffer","ServiceCommand","_id","_timeout_handler","setTimeout","res","clearTimeout","_expect_continue","listenerCount","writeContinue","writeHead","IncomingMessage","rawHeaders","rawTrailers","readable","_consuming","dest","_addHeaderLine","matchKnownFields","flag","low","httpSocketSetup","ServerResponse","command","_sent100","reason","obj","setHeader","common","statusLine","_storeHeader","ClientCommand","_client_request","isInvalidPath","validateHost","host","url2options","Url","xpath","begin","parse","hostname","href","ClientRequest","_extend","path","invalidPath","defaultPort","port","setHost","timeout","methodIsString","toUpperCase","headersArray","hostHeader","posColon","auth","encode","_ended","aborted","timeoutCb","upgradeOrConnect","called","timeout_handler","DTRACE_HTTP_CLIENT_REQUEST","LTTNG_HTTP_CLIENT_REQUEST","COUNTER_HTTP_CLIENT_REQUEST","globalAgent","RemoveRequestByReq","Client","lastIndexOf","ws","WebSocket","client","onopen","id_name","binaryType","new_conn","onmessage","from","onclose"],"mappings":"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gBANJ;AAOfmB,mBAAiB,0BAPF;AAQfC,sBAAoB,+BARL;AASfC,QAAM,MATS;AAUfC,SAAQ,iBAAU,CAAE,CAVL;AAWfjB,UAAQA,MAXO;AAYfK,UAAQA;AAZO,CAAjB,C;;;;;;;AC7NA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AAC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V,EAAgB;AAChF,MAAI+J,IAAIjE,WAAW,QAAQ9F,IAAnB,CAAR;AACAoH,SAAOC,cAAP,CAAsBvB,WAAWtG,SAAjC,EAA4C,OAAOQ,IAAnD,EAAyD;AACvDsH,SAAK,eAAY;AACf,aAAO,KAAKyC,CAAL,CAAP;AACD,KAHsD;AAIvDwB,SAAK,aAAUC,EAAV,EAAc;AACjB;AACA,WAAK3D,eAAL,GAAuB,IAAvB;AACA,aAAQ,KAAKkC,CAAL,IAAUyB,EAAlB;AACD;AARsD,GAAzD;AAUD,CAZD;;AAcA,SAAS5B,cAAT,CAAwB6B,IAAxB,EAA8B;AAC5B,MAAIjD,MAAM,IAAIC,KAAJ,CAAU,aAAV,CAAV;AACAD,MAAIiD,IAAJ,GAAWA,IAAX;AACA,SAAOjD,GAAP;AACD,C;;;;;;AC7ZD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;ACzkBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AAEA,IAAMkD,QAAQpG,OAAO,MAAP,CAAd;AACA,IAAMqG,WAAW,IAAIC,GAAJ,EAAjB;;AAEA;AACA,IAAI/F,SAAS,IAAb;AACA,IAAIgG,OAAO,IAAX;;AAEA,SAASC,aAAT,CAAuBC,IAAvB,EAA6B;AAC3B;AAAA;;AACE,uBAAYtL,GAAZ,EAA0B;AAAA;;AAAA,wCAANoC,IAAM;AAANA,YAAM;AAAA;;AAAA,wHAClBmJ,QAAQvL,GAAR,EAAaoC,IAAb,CADkB;;AAExB,YAAK6I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;;AAEA;;AAEA;AACA,8BAA8B;AAC9B;AACA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;AAChB,gDAAgD;;AAEhD;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH,sBAAsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA,yBAAyB,QAAQ;AACjC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gCAAgC,oBAAoB;;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;ACzeA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL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AM,IAAN;AAvHR;AAyHH;AACJ;;;;;;;;ACrND;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;;;;ACjHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;ACnFA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;;;;;ACJA;;AACA;;;;AACA;;IAAY7F,W;;AACZ;;IAAYD,M;;;;;;;;;;;;AAEZ,IAAM3O,QAAQ2O,OAAO3O,KAArB;AACA,IAAMD,OAAO4O,OAAO5O,I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Cb,mBAAO,KAAKqF,IAAZ;AACH,S;0BAEclH,G,EAAK;AAChB,iBAAKkH,IAAL,GAAYlH,GAAZ;AACH;;;4BAEmB;AAChB,mBAAO,KAAKyH,OAAZ;AACH,S;0BAEiBzH,G,EAAK;AACnB,iBAAKyH,OAAL,GAAezH,GAAf;AACH;;;;;;kBAlCgBgW,c;;;;;;;ACfrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;;AAEA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,sBAAsB,EAAE;AAClE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;ACzLD;;;;AACA;;AACA;;;;;;;;;;IAEqBS,a;;;AACjB,2BAAYvU,UAAZ,EAAwB8G,EAAxB,EAA4B;AAAA;;AAAA,kIAClB9G,UADkB,EACN8G,EADM,EACF,uBAAWtH,QADT;;AAExB,YAAI8J,IAAI,MAAKjB,GAAL,CAASW,eAAjB;AACA;AACA,YAAIM,KAAK,OAAOA,CAAP,KAAa,QAAtB,EAAgC;AAC5B,kBAAKuB,OAAL,CAAa/B,cAAb,GAA8BQ,KAAK,CAAnC;AACH,SAFD,MAEO;AACH;AACA,kBAAKuB,OAAL,CAAa/B,cAAb,GAA8B,IAA9B;AACH;AACD,cAAK4J,GAAL,GAAW5L,EAAX;AACA,cAAK0N,eAAL,GAAuB,IAAvB;;AAXwB;AAa3B;;;;iCACQ7L,O,EAAS;AACd,iBAAK6L,eAAL,GAAuB7L,OAAvB;AACA,gBAAIiD,MAAM,KAAK4I,eAAf;AACA,gBAAI5L,MAAM,IAAV;AACAgD,gBAAI9Q,EAAJ,CAAO,OAAP,EAAgB,UAAU0N,IAAV,EAAgBS,QAAhB,EAA0B8G,QAA1B,EAAoC;AAChDnH,oBAAI6E,KAAJ,CAAUjF,IAAV,EAAgBS,QAAhB;AACA,oBAAI8G,QAAJ,EAAc;AACVA;AACH;AACJ,aALD;AAMH;;;0CACiB8C,G,EAAK7O,e,EAAiB;AACpC,gBAAI4H,MAAM,KAAK4I,eAAf;AACA,gBAAI5I,QAAQ,IAAZ,EAAkB;AACd,mCAAM,iDAAN,EAAyD,KAAK8G,GAA9D;AACA,uBAAO,CAAC,CAAR;AACH;AACD9G,gBAAIkH,YAAJ;AACAlH,gBAAInP,IAAJ,CAAS,UAAT,EAAqBoW,GAArB;;AAEA,mBAAO,CAAP;AACH;;;;;;kBApCgB0B,a;;;;;;;;;;;;;;;;ACJrB;;;;AACA;;IAAYzG,M;;AACZ;;;;AACA;;;;AACA;;AACA;;IAAYC,W;;;;;;;;;;;;AAEZ,IAAM5O,QAAQ2O,OAAO3O,KAArB;AACA,IAAMP,gBAAgBkP,OAAOlP,aAA7B;;AAEA,IAAIqL,mBAAmB,CAAvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASwK,aAAT,CAAuBhO,CAAvB,EAA0B;AACtB,QAAIrN,IAAI,CAAR;AACA,QAAIqN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,QAAI,EAAE3E,CAAF,IAAOqN,EAAEpN,MAAb,EAAqB,OAAO,KAAP;AACrB,QAAIoN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,QAAI,EAAE3E,CAAF,IAAOqN,EAAEpN,MAAb,EAAqB,OAAO,KAAP;AACrB,QAAIoN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,QAAI,EAAE3E,CAAF,IAAOqN,EAAEpN,MAAb,EAAqB,OAAO,KAAP;AACrB,QAAIoN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,QAAI,EAAE3E,CAAF,IAAOqN,EAAEpN,MAAb,EAAqB,OAAO,KAAP;AACrB,QAAIoN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,QAAI,EAAE3E,CAAF,IAAOqN,EAAEpN,MAAb,EAAqB,OAAO,KAAP;AACrB,QAAIoN,EAAE1I,UAAF,CAAa,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAC3B,MAAE3E,CAAF;AACA,WAAOA,IAAIqN,EAAEpN,MAAb,EAAqB,EAAED,CAAvB;AACI,YAAIqN,EAAE1I,UAAF,CAAa3E,CAAb,KAAmB,EAAvB,EAA2B,OAAO,IAAP;AAD/B,KAEA,OAAO,KAAP;AACH;;AAED,SAASsb,YAAT,CAAsBC,IAAtB,EAA4Bpb,IAA5B,EAAkC;AAC9B,QAAIob,SAAS,IAAT,IAAiB,OAAOA,IAAP,KAAgB,QAArC,EAA+C;AAC3C,cAAM,IAAI5G,YAAYpT,SAAhB,CAA0B,sBAA1B,eAA6DpB,IAA7D,EAAqE,CAAC,QAAD,EAAW,WAAX,EAAwB,MAAxB,CAArE,EAAsGob,IAAtG,CAAN;AACH;AACD,WAAOA,IAAP;AACH;;AAED,SAASC,WAAT,CAAqBC,GAArB,EAA0B;AACtB;AACA,QAAI/U,OAAO+U,GAAX;AACA,QAAIC,QAAQ,IAAZ;AACA,QAAIC,QAAQjV,KAAKoD,OAAL,CAAa,MAAb,CAAZ;AACA,QAAI6R,UAAU,CAAC,CAAf,EAAkB;AACd,YAAIjT,MAAMhC,KAAKoD,OAAL,CAAa,GAAb,CAAV;AACA,YAAIpB,QAAQ,CAAC,CAAb,EAAgB;AACZ3C,kBAAM,0CAAN,EAAkDW,IAAlD;AACA,mBAAO,IAAP;AACH;AACDgV,gBAAQhV,KAAKxD,KAAL,CAAWyY,QAAQ,CAAnB,EAAsBjT,GAAtB,CAAR;AACAhC,eAAOA,KAAKxD,KAAL,CAAW,CAAX,EAAcyY,QAAQ,CAAtB,IAA2B,GAA3B,GAAiCjV,KAAKxD,KAAL,CAAWwF,MAAM,CAAjB,CAAxC;AACH;;AAED,QAAI2D,UAAU,cAAIuP,KAAJ,CAAUlV,IAAV,CAAd;;AAEA,QAAIgV,KAAJ,EAAW;AACPrP,gBAAQkP,IAAR,GAAeG,KAAf;AACArP,gBAAQwP,QAAR,GAAmB,IAAnB;AACA,YAAIC,OAAOzP,QAAQyP,IAAnB;AACA,YAAIA,IAAJ,EAAU;AACN,gBAAI5L,IAAI4L,KAAKhS,OAAL,CAAa,OAAb,CAAR;AACA,gBAAIoG,MAAM,CAAC,CAAX,EAAc;AACV7D,wBAAQyP,IAAR,GAAeA,KAAK5Y,KAAL,CAAW,CAAX,EAAcgN,IAAI,CAAlB,WAA2BwL,KAA3B,UAAsCI,KAAK5Y,KAAL,CAAWgN,IAAI,CAAf,CAArD;AACH;AACJ;AACJ,KAVD,MAUO;AACH7D,gBAAQkP,IAAR,GAAelP,QAAQwP,QAAvB;AACH;AACD,WAAOxP,OAAP;AACH;;IAEoB0P,a;;;AACjB,2BAAY1P,OAAZ,EAAqByE,EAArB,EAAyB;AAAA;;AAAA;;AAGrB,YAAI,OAAOzE,OAAP,KAAmB,QAAvB,EAAiC;AAC7BA,sBAAUmP,YAAYnP,OAAZ,CAAV;AACA,gBAAIA,QAAQwP,QAAR,KAAqB,IAArB,IAA6B,CAACxP,QAAQwP,QAA1C,EAAoD;AAChD,sBAAM,IAAIjT,KAAJ,CAAU,yBAAV,CAAN;AACH;AACJ,SALD,MAKO;AACHyD,sBAAU,eAAK2P,OAAL,CAAa,EAAb,EAAiB3P,OAAjB,CAAV;AACA,gBAAI,CAACA,QAAQkP,IAAb,EAAmB;AACflP,wBAAQkP,IAAR,GAAelP,QAAQwP,QAAvB;AACH;AACJ;;AAED,YAAIjO,WAAWvB,QAAQuB,QAAR,IAAoB,OAAnC;AACA,YAAII,mBAAmB,OAAvB;;AAEA,YAAIiO,aAAJ;AACA,YAAI5P,QAAQ4P,IAAZ,EAAkB;AACdA,mBAAO,KAAK5P,QAAQ4P,IAApB;AACA,gBAAIC,oBAAJ;AACA,gBAAID,KAAKhc,MAAL,IAAe,EAAnB,EAAuB;AAAE;AACrBic,8BAAcb,cAAcY,IAAd,CAAd;AACH,aAFD,MAEO;AACHC,8BAAc,kBAAkBnb,IAAlB,CAAuBkb,IAAvB,CAAd;AACH;AACD,gBAAIC,WAAJ,EACI,MAAM,IAAIvH,YAAYpT,SAAhB,CAA0B,0BAA1B,EAAsD,cAAtD,CAAN;AACP;;AAED,YAAIqM,aAAaI,gBAAjB,EAAmC;AAC/B,kBAAM,IAAIpF,KAAJ,CAAU,sBAAV,EAAkCgF,QAAlC,EAA4CI,gBAA5C,CAAN;AACH;;AAED,YAAImO,cAAc,EAAlB;AACA,YAAIC,OAAO/P,QAAQ+P,IAAR,GAAe/P,QAAQ+P,IAAR,IAAgBD,WAA1C;AACA,YAAIZ,OAAOlP,QAAQkP,IAAR,GAAeD,aAAajP,QAAQkP,IAArB,EAA2B,MAA3B,KAAsCD,aAAajP,QAAQwP,QAArB,EAA+B,UAA/B,CAAtC,IAAoF,WAA9G;;AAGA,YAAIQ,UAAWhQ,QAAQgQ,OAAR,KAAoB9X,SAAnC;;AAEA,cAAK+X,OAAL,GAAejQ,QAAQiQ,OAAR,GAAkBjQ,QAAQiQ,OAA1B,GAAoC,IAAI,EAAJ,GAAS,IAA5D;;AAEA,YAAIjS,SAASgC,QAAQhC,MAArB;AACA,YAAIkS,iBAAkB,OAAOlS,MAAP,KAAkB,QAAxC;AACA,YAAIA,WAAW,IAAX,IAAmB,CAACkS,cAAxB,EAAwC;AACpC,kBAAM,IAAI3T,KAAJ,CAAU,sBAAV,EAAkC,QAAlC,EACF,QADE,EACQyB,MADR,CAAN;AAEH;;AAED,YAAIkS,kBAAkBlS,MAAtB,EAA8B;AAC1B,gBAAI,CAACqK,OAAO/O,iBAAP,CAAyB0E,MAAzB,CAAL,EAAuC;AACnC,sBAAM,IAAIzB,KAAJ,CAAU,wBAAV,EAAoC,QAApC,CAAN;AACH;AACDyB,qBAAS,MAAKA,MAAL,GAAcA,OAAOmS,WAAP,EAAvB;AACH,SALD,MAKO;AACHnS,qBAAS,MAAKA,MAAL,GAAc,KAAvB;AACH;;AAED,cAAK4R,IAAL,GAAY5P,QAAQ4P,IAAR,IAAgB,GAA5B;AACA,YAAInL,EAAJ,EAAQ;AACJ,kBAAKrP,IAAL,CAAU,UAAV,EAAsBqP,EAAtB;AACH;;AAED,YAAI2L,eAAerb,MAAMmN,OAAN,CAAclC,QAAQ9F,OAAtB,CAAnB;AACA,YAAI,CAACkW,YAAL,EAAmB;AACf,gBAAIpQ,QAAQ9F,OAAZ,EAAqB;AACjB,oBAAIkQ,OAAOlP,OAAOkP,IAAP,CAAYpK,QAAQ9F,OAApB,CAAX;AACA,qBAAK,IAAIvG,IAAI,CAAb,EAAgBA,IAAIyW,KAAKxW,MAAzB,EAAiCD,GAAjC,EAAsC;AAClC,wBAAIY,MAAM6V,KAAKzW,CAAL,CAAV;AACA,0BAAK+a,SAAL,CAAena,GAAf,EAAoByL,QAAQ9F,OAAR,CAAgB3F,GAAhB,CAApB;AACH;AACJ;;AAED,gBAAI2a,QAAQ,CAAC,MAAKvK,SAAL,CAAe,MAAf,CAAT,IAAmCqL,OAAvC,EAAgD;AAC5C,oBAAIK,aAAanB,IAAjB;;AAEA;AACA;AACA;AACA,oBAAIoB,WAAWD,WAAW5S,OAAX,CAAmB,GAAnB,CAAf;AACA,oBAAI6S,aAAa,CAAC,CAAd,IACAD,WAAW5S,OAAX,CAAmB,GAAnB,EAAwB6S,WAAW,CAAnC,MAA0C,CAAC,CAD3C,IAEAD,WAAW/X,UAAX,CAAsB,CAAtB,MAA6B,EAFjC,CAEoC,OAFpC,EAE8C;AAC1C+X,2CAAiBA,UAAjB;AACH;;AAED,oBAAIN,QAAQ,CAACA,IAAD,KAAUD,WAAtB,EAAmC;AAC/BO,kCAAc,MAAMN,IAApB;AACH;AACD,sBAAKrB,SAAL,CAAe,MAAf,EAAuB2B,UAAvB;AACA;AACH;AACJ;;AAED,YAAIrQ,QAAQuQ,IAAR,IAAgB,CAAC,MAAK5L,SAAL,CAAe,eAAf,CAArB,EAAsD;AAClD,kBAAK+J,SAAL,CAAe,eAAf,EAAgC,WAAW,eAAO8B,MAAP,CAAcxQ,QAAQuQ,IAAtB,CAA3C;AACH;AACD;;;;;;;;;;;AAWA,cAAKjH,2BAAL,GAAmC,KAAnC;;AAEA,YAAI8G,YAAJ,EAAkB;AACd,kBAAKvB,YAAL,CAAkB,MAAK7Q,MAAL,GAAc,GAAd,GAAoB,MAAK4R,IAAzB,GAAgC,eAAlD,EACI5P,QAAQ9F,OADZ;AAEH,SAHD,MAGO,IAAI,MAAKyK,SAAL,CAAe,QAAf,CAAJ,EAA8B;AACjC,gBAAI,MAAKqF,OAAT,EAAkB;AACd,sBAAM,IAAIzN,KAAJ,CAAU,uBAAV,CAAN;AACH;;AAED,kBAAKsS,YAAL,CAAkB,MAAK7Q,MAAL,GAAc,GAAd,GAAoB,MAAK4R,IAAzB,GAAgC,eAAlD,EACI,MAAKzW,aAAL,CADJ;AAEH;;AAED,cAAKsX,MAAL,GAAc,KAAd;AACA,cAAKrD,GAAL,GAAW,IAAX;AACA,cAAKsD,OAAL,GAAexY,SAAf;AACA,cAAKyY,SAAL,GAAiB,IAAjB;AACA,cAAKC,gBAAL,GAAwB,KAAxB;AACA,cAAKpL,MAAL,GAAc,IAAd;AACA,cAAKjC,eAAL,GAAuB,IAAvB;;AAEA,cAAK+B,KAAL,GAAa,IAAb;AACA,YAAIjE,KAAK,EAAEmD,gBAAF,GAAqBA,gBAArB,GAAwCA,mBAAmB,CAApE;AACA,cAAKkK,SAAL,CAAe,MAAf,EAAuBrN,EAAvB;AACA,YAAIwP,SAAS,KAAb;;AAEA;AACA,YAAI1K,WAAJ;AACA,cAAK2K,eAAL,GAAuB3D,WAAW,YAAY;AAC1ChH,gBAAInP,IAAJ,CAAS,gBAAT;AACH,SAFsB,EAEpB,MAAKiZ,OAFe,CAAvB;AA3IqB;AA8IxB;;;;kCAES;AACNc,uCAA2B,IAA3B,EAAiC,KAAKxW,UAAtC;AACAyW,sCAA0B,IAA1B,EAAgC,KAAKzW,UAArC;AACA0W;AACA,oCAAgB3d,SAAhB,CAA0BoU,OAA1B,CAAkCrR,IAAlC,CAAuC,IAAvC;AACH;;;0CAEiB;AACd,gBAAI,KAAK2T,OAAT,EAAkB;AACd,sBAAM,IAAI1B,YAAY/L,KAAhB,CAAsB,uBAAtB,EAA+C,QAA/C,CAAN;AACH;AACD,iBAAKsS,YAAL,CAAkB,KAAK7Q,MAAL,GAAc,GAAd,GAAoB,KAAK4R,IAAzB,GAAgC,eAAlD,EACI,KAAKzW,aAAL,CADJ;AAEH;;;kCAES;AACN+X,wBAAYC,kBAAZ,CAA+B,IAA/B;AACA,iBAAKna,IAAL,CAAU,gBAAV;AACH;;;gCAEO,CACP;;;;;;;;;;;;;sBAEc;AACX,gBAAI,KAAK8Z,eAAL,IAAwB,IAA5B,EAAkC;AAC9BzD,6BAAa,KAAKyD,eAAlB;AACH;AACJ,S;;;;;;kBA5KgBpB,a;;;;;;;;AChFrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,2CAA2C,KAAK;AAChD,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,4BAA4B;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,yBAAyB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,mBAAmB;AACrC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,MAAM;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;sDC3tBA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,SAAS;AACrB;AACA,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,MAAM;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA,KAAK;AACL,4BAA4B;AAC5B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mCAAmC;AAClE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,aAAa,WAAW;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAwB;;AAExB,yCAAyC,qBAAqB;;AAE9D;AACA;AACA;AACA;AACA;AACA,kCAAkC,oBAAoB;;AAEtD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,0BAA0B,iBAAiB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,cAAc,iBAAiB;AAC/B;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,oBAAoB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAEA;AACA;AACA;AACA;AACA,GAAG;AAAA;AACH,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA,CAAC;;;;;;;;ACphBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;ACrBA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;ACfA;;AAEA;AACA;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,eAAe;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;8CCpFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,OAAO;AAC9C;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iCAAiC,IAAI;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,iCAAiC;AACjC;AACA;AACA;AACA,gCAAgC,EAAE;AAClC,gCAAgC,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,iCAAiC,IAAI;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA,qDAAqD,+BAA+B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oB;AACA;AACA,wFAA8B,uBAAuB;AAAA;AACrD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AC3NA;;;;AACA;;IAAYhN,U;;AACZ;;AACA;;IAAY2F,M;;;;;;;;;;;;IAEN+I,M;;;AACF,oBAAY3E,eAAZ,EAA6B;AAAA;;AAAA;;AAAA;;AAEzB,YAAI,EAAE,iBAAgB2E,MAAlB,CAAJ,EAA+B,cAAO,IAAIA,MAAJ,EAAP;AAC/B,YAAI3E,eAAJ,EAAqB;AACjB,kBAAKpX,EAAL,CAAQ,SAAR,EAAmBoX,eAAnB;AACA,kBAAKC,gBAAL,GAAwBD,eAAxB;AACH;AANwB;AAO5B;;;;gCAEOxO,G,EAAK;AACT,gBAAItI,QAAQsI,IAAIoT,WAAJ,CAAgB,GAAhB,CAAZ;AACA,gBAAI1b,SAAS,CAAC,CAAd,EAAiB;AACb,sBAAM,IAAI4G,KAAJ,CAAU,0BAAV,CAAN;AACH;AACD,gBAAIzI,OAAOmK,IAAIpH,KAAJ,CAAUlB,QAAQ,CAAlB,CAAX;AACA,gBAAI+M,WAAWyB,aAAX,CAAyBrQ,IAAzB,CAAJ,EAAoC;AAChC,uBAAO,IAAP;AACH;AACD,gBAAMwd,KAAK,IAAIC,SAAJ,CAActT,GAAd,CAAX;AACA,gBAAIuT,SAAS,IAAb;;AAEAF,eAAGG,MAAH,GAAY,UAAUC,OAAV,EAAmB;AAC3B,uBAAO,YAAY;AACfJ,uBAAGK,UAAH,GAAgB,aAAhB;AACA,wBAAIC,WAAW,IAAIlP,WAAWA,UAAf,CAA0B4O,EAA1B,EAA8BE,MAA9B,CAAf;AACA9O,+BAAW2B,aAAX,CAAyBqN,OAAzB,EAAkCE,QAAlC;AACAJ,2BAAOxa,IAAP,CAAY,WAAZ;AACH,iBALD;AAMH,aAPW,CAOVlD,IAPU,CAAZ;;AASAwd,eAAGO,SAAH,GAAe,UAAUH,OAAV,EAAmB;AAC9B,uBAAO,UAAU3O,IAAV,EAAgB;AACnB,wBAAI7G,cAAJ;;AAEAA,4BAAQ,eAAO4V,IAAP,CAAY/O,KAAKA,IAAjB,CAAR;;AAEA,wBAAIuB,OAAO5B,WAAWyB,aAAX,CAAyBuN,OAAzB,CAAX;AACA,wBAAIpN,IAAJ,EAAU;AACNA,6BAAKtN,IAAL,CAAU,OAAV,EAAmBkF,KAAnB;AACH;AACJ,iBATD;AAUH,aAXc,CAWbpI,IAXa,CAAf;;AAaAwd,eAAGS,OAAH,GAAa,UAAUL,OAAV,EAAmB;AAC5B,uBAAO,YAAY;AACfhP,+BAAW6B,gBAAX,CAA4BmN,OAA5B;AACH,iBAFD;AAGH,aAJY,CAIX5d,IAJW,CAAb;;AAMA,mBAAO,IAAP;AACH;;;;;;kBAGUsd,M","file":"httpws.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"httpws\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"httpws\"] = factory();\n\telse\n\t\troot[\"httpws\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 14dc03b23b35acddac86","/*!\r\n * EventEmitter v5.2.2 - git.io/ee\r\n * Unlicense - http://unlicense.org/\r\n * Oliver Caldwell - http://oli.me.uk/\r\n * @preserve\r\n */\r\n\r\n;(function (exports) {\r\n    'use strict';\r\n\r\n    /**\r\n     * Class for managing events.\r\n     * Can be extended to provide event functionality in other classes.\r\n     *\r\n     * @class EventEmitter Manages event registering and emitting.\r\n     */\r\n    function EventEmitter() {}\r\n\r\n    // Shortcuts to improve speed and size\r\n    var proto = EventEmitter.prototype;\r\n    var originalGlobalValue = exports.EventEmitter;\r\n\r\n    /**\r\n     * Finds the index of the listener for the event in its storage array.\r\n     *\r\n     * @param {Function[]} listeners Array of listeners to search through.\r\n     * @param {Function} listener Method to look for.\r\n     * @return {Number} Index of the specified listener, -1 if not found\r\n     * @api private\r\n     */\r\n    function indexOfListener(listeners, listener) {\r\n        var i = listeners.length;\r\n        while (i--) {\r\n            if (listeners[i].listener === listener) {\r\n                return i;\r\n            }\r\n        }\r\n\r\n        return -1;\r\n    }\r\n\r\n    /**\r\n     * Alias a method while keeping the context correct, to allow for overwriting of target method.\r\n     *\r\n     * @param {String} name The name of the target method.\r\n     * @return {Function} The aliased method\r\n     * @api private\r\n     */\r\n    function alias(name) {\r\n        return function aliasClosure() {\r\n            return this[name].apply(this, arguments);\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Returns the listener array for the specified event.\r\n     * Will initialise the event object and listener arrays if required.\r\n     * Will return an object if you use a regex search. The object contains keys for each matched event. So /ba[rz]/ might return an object containing bar and baz. But only if you have either defined them with defineEvent or added some listeners to them.\r\n     * Each property in the object response is an array of listener functions.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\r\n     * @return {Function[]|Object} All listener functions for the event.\r\n     */\r\n    proto.getListeners = function getListeners(evt) {\r\n        var events = this._getEvents();\r\n        var response;\r\n        var key;\r\n\r\n        // Return a concatenated array of all matching events if\r\n        // the selector is a regular expression.\r\n        if (evt instanceof RegExp) {\r\n            response = {};\r\n            for (key in events) {\r\n                if (events.hasOwnProperty(key) && evt.test(key)) {\r\n                    response[key] = events[key];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            response = events[evt] || (events[evt] = []);\r\n        }\r\n\r\n        return response;\r\n    };\r\n\r\n    /**\r\n     * Takes a list of listener objects and flattens it into a list of listener functions.\r\n     *\r\n     * @param {Object[]} listeners Raw listener objects.\r\n     * @return {Function[]} Just the listener functions.\r\n     */\r\n    proto.flattenListeners = function flattenListeners(listeners) {\r\n        var flatListeners = [];\r\n        var i;\r\n\r\n        for (i = 0; i < listeners.length; i += 1) {\r\n            flatListeners.push(listeners[i].listener);\r\n        }\r\n\r\n        return flatListeners;\r\n    };\r\n\r\n    /**\r\n     * Fetches the requested listeners via getListeners but will always return the results inside an object. This is mainly for internal use but others may find it useful.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to return the listeners from.\r\n     * @return {Object} All listener functions for an event in an object.\r\n     */\r\n    proto.getListenersAsObject = function getListenersAsObject(evt) {\r\n        var listeners = this.getListeners(evt);\r\n        var response;\r\n\r\n        if (listeners instanceof Array) {\r\n            response = {};\r\n            response[evt] = listeners;\r\n        }\r\n\r\n        return response || listeners;\r\n    };\r\n\r\n    function isValidListener (listener) {\r\n        if (typeof listener === 'function' || listener instanceof RegExp) {\r\n            return true\r\n        } else if (listener && typeof listener === 'object') {\r\n            return isValidListener(listener.listener)\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Adds a listener function to the specified event.\r\n     * The listener will not be added if it is a duplicate.\r\n     * If the listener returns true then it will be removed after it is called.\r\n     * If you pass a regular expression as the event name then the listener will be added to all events that match it.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\r\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.addListener = function addListener(evt, listener) {\r\n        if (!isValidListener(listener)) {\r\n            throw new TypeError('listener must be a function');\r\n        }\r\n\r\n        var listeners = this.getListenersAsObject(evt);\r\n        var listenerIsWrapped = typeof listener === 'object';\r\n        var key;\r\n\r\n        for (key in listeners) {\r\n            if (listeners.hasOwnProperty(key) && indexOfListener(listeners[key], listener) === -1) {\r\n                listeners[key].push(listenerIsWrapped ? listener : {\r\n                    listener: listener,\r\n                    once: false\r\n                });\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Alias of addListener\r\n     */\r\n    proto.on = alias('addListener');\r\n\r\n    /**\r\n     * Semi-alias of addListener. It will add a listener that will be\r\n     * automatically removed after its first execution.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to attach the listener to.\r\n     * @param {Function} listener Method to be called when the event is emitted. If the function returns true then it will be removed after calling.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.addOnceListener = function addOnceListener(evt, listener) {\r\n        return this.addListener(evt, {\r\n            listener: listener,\r\n            once: true\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Alias of addOnceListener.\r\n     */\r\n    proto.once = alias('addOnceListener');\r\n\r\n    /**\r\n     * Defines an event name. This is required if you want to use a regex to add a listener to multiple events at once. If you don't do this then how do you expect it to know what event to add to? Should it just add to every possible match for a regex? No. That is scary and bad.\r\n     * You need to tell it what event names should be matched by a regex.\r\n     *\r\n     * @param {String} evt Name of the event to create.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.defineEvent = function defineEvent(evt) {\r\n        this.getListeners(evt);\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Uses defineEvent to define multiple events.\r\n     *\r\n     * @param {String[]} evts An array of event names to define.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.defineEvents = function defineEvents(evts) {\r\n        for (var i = 0; i < evts.length; i += 1) {\r\n            this.defineEvent(evts[i]);\r\n        }\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Removes a listener function from the specified event.\r\n     * When passed a regular expression as the event name, it will remove the listener from all events that match it.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to remove the listener from.\r\n     * @param {Function} listener Method to remove from the event.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.removeListener = function removeListener(evt, listener) {\r\n        var listeners = this.getListenersAsObject(evt);\r\n        var index;\r\n        var key;\r\n\r\n        for (key in listeners) {\r\n            if (listeners.hasOwnProperty(key)) {\r\n                index = indexOfListener(listeners[key], listener);\r\n\r\n                if (index !== -1) {\r\n                    listeners[key].splice(index, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Alias of removeListener\r\n     */\r\n    proto.off = alias('removeListener');\r\n\r\n    /**\r\n     * Adds listeners in bulk using the manipulateListeners method.\r\n     * If you pass an object as the first argument you can add to multiple events at once. The object should contain key value pairs of events and listeners or listener arrays. You can also pass it an event name and an array of listeners to be added.\r\n     * You can also pass it a regular expression to add the array of listeners to all events that match it.\r\n     * Yeah, this function does quite a bit. That's probably a bad thing.\r\n     *\r\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add to multiple events at once.\r\n     * @param {Function[]} [listeners] An optional array of listener functions to add.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.addListeners = function addListeners(evt, listeners) {\r\n        // Pass through to manipulateListeners\r\n        return this.manipulateListeners(false, evt, listeners);\r\n    };\r\n\r\n    /**\r\n     * Removes listeners in bulk using the manipulateListeners method.\r\n     * If you pass an object as the first argument you can remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\r\n     * You can also pass it an event name and an array of listeners to be removed.\r\n     * You can also pass it a regular expression to remove the listeners from all events that match it.\r\n     *\r\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to remove from multiple events at once.\r\n     * @param {Function[]} [listeners] An optional array of listener functions to remove.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.removeListeners = function removeListeners(evt, listeners) {\r\n        // Pass through to manipulateListeners\r\n        return this.manipulateListeners(true, evt, listeners);\r\n    };\r\n\r\n    /**\r\n     * Edits listeners in bulk. The addListeners and removeListeners methods both use this to do their job. You should really use those instead, this is a little lower level.\r\n     * The first argument will determine if the listeners are removed (true) or added (false).\r\n     * If you pass an object as the second argument you can add/remove from multiple events at once. The object should contain key value pairs of events and listeners or listener arrays.\r\n     * You can also pass it an event name and an array of listeners to be added/removed.\r\n     * You can also pass it a regular expression to manipulate the listeners of all events that match it.\r\n     *\r\n     * @param {Boolean} remove True if you want to remove listeners, false if you want to add.\r\n     * @param {String|Object|RegExp} evt An event name if you will pass an array of listeners next. An object if you wish to add/remove from multiple events at once.\r\n     * @param {Function[]} [listeners] An optional array of listener functions to add/remove.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.manipulateListeners = function manipulateListeners(remove, evt, listeners) {\r\n        var i;\r\n        var value;\r\n        var single = remove ? this.removeListener : this.addListener;\r\n        var multiple = remove ? this.removeListeners : this.addListeners;\r\n\r\n        // If evt is an object then pass each of its properties to this method\r\n        if (typeof evt === 'object' && !(evt instanceof RegExp)) {\r\n            for (i in evt) {\r\n                if (evt.hasOwnProperty(i) && (value = evt[i])) {\r\n                    // Pass the single listener straight through to the singular method\r\n                    if (typeof value === 'function') {\r\n                        single.call(this, i, value);\r\n                    }\r\n                    else {\r\n                        // Otherwise pass back to the multiple function\r\n                        multiple.call(this, i, value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // So evt must be a string\r\n            // And listeners must be an array of listeners\r\n            // Loop over it and pass each one to the multiple method\r\n            i = listeners.length;\r\n            while (i--) {\r\n                single.call(this, evt, listeners[i]);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Removes all listeners from a specified event.\r\n     * If you do not specify an event then all listeners will be removed.\r\n     * That means every event will be emptied.\r\n     * You can also pass a regex to remove all events that match it.\r\n     *\r\n     * @param {String|RegExp} [evt] Optional name of the event to remove all listeners for. Will remove from every event if not passed.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.removeEvent = function removeEvent(evt) {\r\n        var type = typeof evt;\r\n        var events = this._getEvents();\r\n        var key;\r\n\r\n        // Remove different things depending on the state of evt\r\n        if (type === 'string') {\r\n            // Remove all listeners for the specified event\r\n            delete events[evt];\r\n        }\r\n        else if (evt instanceof RegExp) {\r\n            // Remove all events matching the regex.\r\n            for (key in events) {\r\n                if (events.hasOwnProperty(key) && evt.test(key)) {\r\n                    delete events[key];\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            // Remove all listeners in all events\r\n            delete this._events;\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Alias of removeEvent.\r\n     *\r\n     * Added to mirror the node API.\r\n     */\r\n    proto.removeAllListeners = alias('removeEvent');\r\n\r\n    /**\r\n     * Emits an event of your choice.\r\n     * When emitted, every listener attached to that event will be executed.\r\n     * If you pass the optional argument array then those arguments will be passed to every listener upon execution.\r\n     * Because it uses `apply`, your array of arguments will be passed as if you wrote them out separately.\r\n     * So they will not arrive within the array on the other side, they will be separate.\r\n     * You can also pass a regular expression to emit to all events that match it.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\r\n     * @param {Array} [args] Optional array of arguments to be passed to each listener.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.emitEvent = function emitEvent(evt, args) {\r\n        var listenersMap = this.getListenersAsObject(evt);\r\n        var listeners;\r\n        var listener;\r\n        var i;\r\n        var key;\r\n        var response;\r\n\r\n        for (key in listenersMap) {\r\n            if (listenersMap.hasOwnProperty(key)) {\r\n                listeners = listenersMap[key].slice(0);\r\n\r\n                for (i = 0; i < listeners.length; i++) {\r\n                    // If the listener returns true then it shall be removed from the event\r\n                    // The function is executed either with a basic call or an apply if there is an args array\r\n                    listener = listeners[i];\r\n\r\n                    if (listener.once === true) {\r\n                        this.removeListener(evt, listener.listener);\r\n                    }\r\n\r\n                    response = listener.listener.apply(this, args || []);\r\n\r\n                    if (response === this._getOnceReturnValue()) {\r\n                        this.removeListener(evt, listener.listener);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Alias of emitEvent\r\n     */\r\n    proto.trigger = alias('emitEvent');\r\n\r\n    /**\r\n     * Subtly different from emitEvent in that it will pass its arguments on to the listeners, as opposed to taking a single array of arguments to pass on.\r\n     * As with emitEvent, you can pass a regex in place of the event name to emit to all events that match it.\r\n     *\r\n     * @param {String|RegExp} evt Name of the event to emit and execute listeners for.\r\n     * @param {...*} Optional additional arguments to be passed to each listener.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.emit = function emit(evt) {\r\n        var args = Array.prototype.slice.call(arguments, 1);\r\n        return this.emitEvent(evt, args);\r\n    };\r\n\r\n    /**\r\n     * Sets the current value to check against when executing listeners. If a\r\n     * listeners return value matches the one set here then it will be removed\r\n     * after execution. This value defaults to true.\r\n     *\r\n     * @param {*} value The new value to check for when executing listeners.\r\n     * @return {Object} Current instance of EventEmitter for chaining.\r\n     */\r\n    proto.setOnceReturnValue = function setOnceReturnValue(value) {\r\n        this._onceReturnValue = value;\r\n        return this;\r\n    };\r\n\r\n    /**\r\n     * Fetches the current value to check against when executing listeners. If\r\n     * the listeners return value matches this one then it should be removed\r\n     * automatically. It will return true by default.\r\n     *\r\n     * @return {*|Boolean} The current value to check for or the default, true.\r\n     * @api private\r\n     */\r\n    proto._getOnceReturnValue = function _getOnceReturnValue() {\r\n        if (this.hasOwnProperty('_onceReturnValue')) {\r\n            return this._onceReturnValue;\r\n        }\r\n        else {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Fetches the events object and creates one if required.\r\n     *\r\n     * @return {Object} The events storage object.\r\n     * @api private\r\n     */\r\n    proto._getEvents = function _getEvents() {\r\n        return this._events || (this._events = {});\r\n    };\r\n\r\n    /**\r\n     * Reverts the global {@link EventEmitter} to its previous value and returns a reference to this version.\r\n     *\r\n     * @return {Function} Non conflicting EventEmitter class.\r\n     */\r\n    EventEmitter.noConflict = function noConflict() {\r\n        exports.EventEmitter = originalGlobalValue;\r\n        return EventEmitter;\r\n    };\r\n\r\n    // Expose the class either via AMD, CommonJS or the global object\r\n    if (typeof define === 'function' && define.amd) {\r\n        define(function () {\r\n            return EventEmitter;\r\n        });\r\n    }\r\n    else if (typeof module === 'object' && module.exports){\r\n        module.exports = EventEmitter;\r\n    }\r\n    else {\r\n        exports.EventEmitter = EventEmitter;\r\n    }\r\n}(this || {}));\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/EventEmitter.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 1\n// module chunks = 0","'use strict';\r\nconst timers = require('timers');\r\n\r\n\r\n\r\nconst STATUS_CODES = {\r\n  100: 'Continue',\r\n  101: 'Switching Protocols',\r\n  102: 'Processing',                 // RFC 2518, obsoleted by RFC 4918\r\n  200: 'OK',\r\n  201: 'Created',\r\n  202: 'Accepted',\r\n  203: 'Non-Authoritative Information',\r\n  204: 'No Content',\r\n  205: 'Reset Content',\r\n  206: 'Partial Content',\r\n  207: 'Multi-Status',               // RFC 4918\r\n  208: 'Already Reported',\r\n  226: 'IM Used',\r\n  300: 'Multiple Choices',\r\n  301: 'Moved Permanently',\r\n  302: 'Found',\r\n  303: 'See Other',\r\n  304: 'Not Modified',\r\n  305: 'Use Proxy',\r\n  307: 'Temporary Redirect',\r\n  308: 'Permanent Redirect',         // RFC 7238\r\n  400: 'Bad Request',\r\n  401: 'Unauthorized',\r\n  402: 'Payment Required',\r\n  403: 'Forbidden',\r\n  404: 'Not Found',\r\n  405: 'Method Not Allowed',\r\n  406: 'Not Acceptable',\r\n  407: 'Proxy Authentication Required',\r\n  408: 'Request Timeout',\r\n  409: 'Conflict',\r\n  410: 'Gone',\r\n  411: 'Length Required',\r\n  412: 'Precondition Failed',\r\n  413: 'Payload Too Large',\r\n  414: 'URI Too Long',\r\n  415: 'Unsupported Media Type',\r\n  416: 'Range Not Satisfiable',\r\n  417: 'Expectation Failed',\r\n  418: 'I\\'m a teapot',              // RFC 2324\r\n  421: 'Misdirected Request',\r\n  422: 'Unprocessable Entity',       // RFC 4918\r\n  423: 'Locked',                     // RFC 4918\r\n  424: 'Failed Dependency',          // RFC 4918\r\n  425: 'Unordered Collection',       // RFC 4918\r\n  426: 'Upgrade Required',           // RFC 2817\r\n  428: 'Precondition Required',      // RFC 6585\r\n  429: 'Too Many Requests',          // RFC 6585\r\n  431: 'Request Header Fields Too Large', // RFC 6585\r\n  451: 'Unavailable For Legal Reasons',\r\n  500: 'Internal Server Error',\r\n  501: 'Not Implemented',\r\n  502: 'Bad Gateway',\r\n  503: 'Service Unavailable',\r\n  504: 'Gateway Timeout',\r\n  505: 'HTTP Version Not Supported',\r\n  506: 'Variant Also Negotiates',    // RFC 2295\r\n  507: 'Insufficient Storage',       // RFC 4918\r\n  508: 'Loop Detected',\r\n  509: 'Bandwidth Limit Exceeded',\r\n  510: 'Not Extended',               // RFC 2774\r\n  511: 'Network Authentication Required' // RFC 6585\r\n};\r\n\r\nvar dateCache;\r\nfunction utcDate() {\r\n  if (!dateCache) {\r\n    const d = new Date();\r\n    dateCache = d.toUTCString();\r\n    timers.enroll(utcDate, 1000 - d.getMilliseconds());\r\n    timers._unrefActive(utcDate);\r\n  }\r\n  return dateCache;\r\n}\r\nutcDate._onTimeout = function() {\r\n  dateCache = undefined;\r\n};\r\n\r\n\r\n/**\r\n * Verifies that the given val is a valid HTTP token\r\n * per the rules defined in RFC 7230\r\n * See https://tools.ietf.org/html/rfc7230#section-3.2.6\r\n *\r\n * Allowed characters in an HTTP token:\r\n * ^_`a-z  94-122\r\n * A-Z     65-90\r\n * -       45\r\n * 0-9     48-57\r\n * !       33\r\n * #$%&'   35-39\r\n * *+      42-43\r\n * .       46\r\n * |       124\r\n * ~       126\r\n *\r\n * This implementation of checkIsHttpToken() loops over the string instead of\r\n * using a regular expression since the former is up to 180% faster with v8 4.9\r\n * depending on the string length (the shorter the string, the larger the\r\n * performance difference)\r\n *\r\n * Additionally, checkIsHttpToken() is currently designed to be inlinable by v8,\r\n * so take care when making changes to the implementation so that the source\r\n * code size does not exceed v8's default max_inlined_source_size setting.\r\n **/\r\nvar validTokens = [\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\r\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\r\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0, // 112 - 127\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 128 ...\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0  // ... 255\r\n];\r\nfunction checkIsHttpToken(val) {\r\n  if (!validTokens[val.charCodeAt(0)])\r\n    return false;\r\n  if (val.length < 2)\r\n    return true;\r\n  if (!validTokens[val.charCodeAt(1)])\r\n    return false;\r\n  if (val.length < 3)\r\n    return true;\r\n  if (!validTokens[val.charCodeAt(2)])\r\n    return false;\r\n  if (val.length < 4)\r\n    return true;\r\n  if (!validTokens[val.charCodeAt(3)])\r\n    return false;\r\n  for (var i = 4; i < val.length; ++i) {\r\n    if (!validTokens[val.charCodeAt(i)])\r\n      return false;\r\n  }\r\n  return true;\r\n}\r\n\r\n/**\r\n * True if val contains an invalid field-vchar\r\n *  field-value    = *( field-content / obs-fold )\r\n *  field-content  = field-vchar [ 1*( SP / HTAB ) field-vchar ]\r\n *  field-vchar    = VCHAR / obs-text\r\n *\r\n * checkInvalidHeaderChar() is currently designed to be inlinable by v8,\r\n * so take care when making changes to the implementation so that the source\r\n * code size does not exceed v8's default max_inlined_source_size setting.\r\n **/\r\nvar validHdrChars = [\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, // 0 - 15\r\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 32 - 47\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 48 - 63\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 80 - 95\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, // 112 - 127\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 128 ...\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,\r\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1  // ... 255\r\n];\r\nfunction checkInvalidHeaderChar(val) {\r\n  val += '';\r\n  if (val.length < 1)\r\n    return false;\r\n  if (!validHdrChars[val.charCodeAt(0)])\r\n    return true;\r\n  if (val.length < 2)\r\n    return false;\r\n  if (!validHdrChars[val.charCodeAt(1)])\r\n    return true;\r\n  if (val.length < 3)\r\n    return false;\r\n  if (!validHdrChars[val.charCodeAt(2)])\r\n    return true;\r\n  if (val.length < 4)\r\n    return false;\r\n  if (!validHdrChars[val.charCodeAt(3)])\r\n    return true;\r\n  for (var i = 4; i < val.length; ++i) {\r\n    if (!validHdrChars[val.charCodeAt(i)])\r\n      return true;\r\n  }\r\n  return false;\r\n}\r\n\r\n// ArrayBuffer转为字符串，参数为ArrayBuffer对象\r\nfunction ab2str(buf) {\r\n    return String.fromCharCode.apply(null, new Uint8Array(buf));\r\n}\r\n\r\n// 字符串转为ArrayBuffer对象，参数为字符串\r\nfunction str2ab(str) {\r\n    var buf = new ArrayBuffer(str.length); // 每个字符占用1个字节\r\n    var bufView = new Uint8Array(buf);\r\n    for (var i=0, strLen=str.length; i<strLen; i++) {\r\n        bufView[i] = str.charCodeAt(i);\r\n    }\r\n    return buf;\r\n}\r\n\r\n\r\n\r\nmodule.exports = {\r\n  outHeadersKey: Symbol('outHeadersKey'),\r\n  utcDate,\r\n  STATUS_CODES,\r\n\r\n  _checkInvalidHeaderChar: checkInvalidHeaderChar,\r\n  _checkIsHttpToken: checkIsHttpToken,\r\n  chunkExpression: /(?:^|\\W)chunked(?:$|\\W)/i,\r\n  continueExpression: /(?:^|\\W)100-continue(?:$|\\W)/i,\r\n  CRLF: '\\r\\n',\r\n  debug : function(){},\r\n  ab2str: ab2str,\r\n  str2ab: str2ab\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/common.js","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_buffer@4.9.1@buffer/index.js\n// module id = 3\n// module chunks = 0","/*jshint node:true */\r\n\r\nvar assert = require('assert');\r\n\r\nexports.HTTPParser = HTTPParser;\r\nfunction HTTPParser(type) {\r\n  assert.ok(type === HTTPParser.REQUEST || type === HTTPParser.RESPONSE);\r\n  this.type = type;\r\n  this.state = type + '_LINE';\r\n  this.info = {\r\n    headers: [],\r\n    upgrade: false\r\n  };\r\n  this.trailers = [];\r\n  this.line = '';\r\n  this.isChunked = false;\r\n  this.connection = '';\r\n  this.headerSize = 0; // for preventing too big headers\r\n  this.body_bytes = null;\r\n  this.isUserCall = false;\r\n  this.hadError = false;\r\n}\r\nHTTPParser.maxHeaderSize = 80 * 1024; // maxHeaderSize (in bytes) is configurable, but 80kb by default;\r\nHTTPParser.REQUEST = 'REQUEST';\r\nHTTPParser.RESPONSE = 'RESPONSE';\r\nvar kOnHeaders = HTTPParser.kOnHeaders = 0;\r\nvar kOnHeadersComplete = HTTPParser.kOnHeadersComplete = 1;\r\nvar kOnBody = HTTPParser.kOnBody = 2;\r\nvar kOnMessageComplete = HTTPParser.kOnMessageComplete = 3;\r\n\r\n// Some handler stubs, needed for compatibility\r\nHTTPParser.prototype[kOnHeaders] =\r\nHTTPParser.prototype[kOnHeadersComplete] =\r\nHTTPParser.prototype[kOnBody] =\r\nHTTPParser.prototype[kOnMessageComplete] = function () {};\r\n\r\nvar compatMode0_12 = true;\r\nObject.defineProperty(HTTPParser, 'kOnExecute', {\r\n    get: function () {\r\n      // hack for backward compatibility\r\n      compatMode0_12 = false;\r\n      return 4;\r\n    }\r\n  });\r\n\r\nvar methods = exports.HttpMethods = HTTPParser.methods = [\r\n  'DELETE',\r\n  'GET',\r\n  'HEAD',\r\n  'POST',\r\n  'PUT',\r\n  'CONNECT',\r\n  'OPTIONS',\r\n  'TRACE',\r\n  'COPY',\r\n  'LOCK',\r\n  'MKCOL',\r\n  'MOVE',\r\n  'PROPFIND',\r\n  'PROPPATCH',\r\n  'SEARCH',\r\n  'UNLOCK',\r\n  'BIND',\r\n  'REBIND',\r\n  'UNBIND',\r\n  'ACL',\r\n  'REPORT',\r\n  'MKACTIVITY',\r\n  'CHECKOUT',\r\n  'MERGE',\r\n  'M-SEARCH',\r\n  'NOTIFY',\r\n  'SUBSCRIBE',\r\n  'UNSUBSCRIBE',\r\n  'PATCH',\r\n  'PURGE',\r\n  'MKCALENDAR',\r\n  'LINK',\r\n  'UNLINK'\r\n];\r\nHTTPParser.prototype.reinitialize = HTTPParser;\r\nHTTPParser.prototype.close =\r\nHTTPParser.prototype.pause =\r\nHTTPParser.prototype.resume = function () {};\r\nHTTPParser.prototype._compatMode0_11 = false;\r\nHTTPParser.prototype.getAsyncId = function() { return false; };\r\n\r\nvar headerState = {\r\n  REQUEST_LINE: true,\r\n  RESPONSE_LINE: true,\r\n  HEADER: true\r\n};\r\nHTTPParser.prototype.execute = function (chunk, start, length) {\r\n  if (!(this instanceof HTTPParser)) {\r\n    throw new TypeError('not a HTTPParser');\r\n  }\r\n\r\n  // backward compat to node < 0.11.4\r\n  // Note: the start and length params were removed in newer version\r\n  start = start || 0;\r\n  length = typeof length === 'number' ? length : chunk.length;\r\n\r\n  this.chunk = chunk;\r\n  this.offset = start;\r\n  var end = this.end = start + length;\r\n  try {\r\n    while (this.offset < end) {\r\n      if (this[this.state]()) {\r\n        break;\r\n      }\r\n    }\r\n  } catch (err) {\r\n    if (this.isUserCall) {\r\n      throw err;\r\n    }\r\n    this.hadError = true;\r\n    return err;\r\n  }\r\n  this.chunk = null;\r\n  length = this.offset - start;\r\n  if (headerState[this.state]) {\r\n    this.headerSize += length;\r\n    if (this.headerSize > HTTPParser.maxHeaderSize) {\r\n      return new Error('max header size exceeded');\r\n    }\r\n  }\r\n  return length;\r\n};\r\n\r\nvar stateFinishAllowed = {\r\n  REQUEST_LINE: true,\r\n  RESPONSE_LINE: true,\r\n  BODY_RAW: true\r\n};\r\nHTTPParser.prototype.finish = function () {\r\n  if (this.hadError) {\r\n    return;\r\n  }\r\n  if (!stateFinishAllowed[this.state]) {\r\n    return new Error('invalid state for EOF');\r\n  }\r\n  if (this.state === 'BODY_RAW') {\r\n    this.userCall()(this[kOnMessageComplete]());\r\n  }\r\n};\r\n\r\n// These three methods are used for an internal speed optimization, and it also\r\n// works if theses are noops. Basically consume() asks us to read the bytes\r\n// ourselves, but if we don't do it we get them through execute().\r\nHTTPParser.prototype.consume =\r\nHTTPParser.prototype.unconsume =\r\nHTTPParser.prototype.getCurrentBuffer = function () {};\r\n\r\n//For correct error handling - see HTTPParser#execute\r\n//Usage: this.userCall()(userFunction('arg'));\r\nHTTPParser.prototype.userCall = function () {\r\n  this.isUserCall = true;\r\n  var self = this;\r\n  return function (ret) {\r\n    self.isUserCall = false;\r\n    return ret;\r\n  };\r\n};\r\n\r\nHTTPParser.prototype.nextRequest = function () {\r\n  this.userCall()(this[kOnMessageComplete]());\r\n  this.reinitialize(this.type);\r\n};\r\n\r\nHTTPParser.prototype.consumeLine = function () {\r\n  var end = this.end,\r\n      chunk = this.chunk;\r\n  for (var i = this.offset; i < end; i++) {\r\n    if (chunk[i] === 0x0a) { // \\n\r\n      var line = this.line + chunk.toString('ascii', this.offset, i);\r\n      if (line.charAt(line.length - 1) === '\\r') {\r\n        line = line.substr(0, line.length - 1);\r\n      }\r\n      this.line = '';\r\n      this.offset = i + 1;\r\n      return line;\r\n    }\r\n  }\r\n  //line split over multiple chunks\r\n  this.line += chunk.toString('ascii', this.offset, this.end);\r\n  this.offset = this.end;\r\n};\r\n\r\nvar headerExp = /^([^: \\t]+):[ \\t]*((?:.*[^ \\t])|)/;\r\nvar headerContinueExp = /^[ \\t]+(.*[^ \\t])/;\r\nHTTPParser.prototype.parseHeader = function (line, headers) {\r\n  if (line.indexOf('\\r') !== -1) {\r\n    throw parseErrorCode('HPE_LF_EXPECTED');\r\n  }\r\n\r\n  var match = headerExp.exec(line);\r\n  var k = match && match[1];\r\n  if (k) { // skip empty string (malformed header)\r\n    headers.push(k);\r\n    headers.push(match[2]);\r\n  } else {\r\n    var matchContinue = headerContinueExp.exec(line);\r\n    if (matchContinue && headers.length) {\r\n      if (headers[headers.length - 1]) {\r\n        headers[headers.length - 1] += ' ';\r\n      }\r\n      headers[headers.length - 1] += matchContinue[1];\r\n    }\r\n  }\r\n};\r\n\r\nvar requestExp = /^([A-Z-]+) ([^ ]+) HTTP\\/(\\d)\\.(\\d)$/;\r\nHTTPParser.prototype.REQUEST_LINE = function () {\r\n  var line = this.consumeLine();\r\n  if (!line) {\r\n    return;\r\n  }\r\n  var match = requestExp.exec(line);\r\n  if (match === null) {\r\n    throw parseErrorCode('HPE_INVALID_CONSTANT');\r\n  }\r\n  this.info.method = this._compatMode0_11 ? match[1] : methods.indexOf(match[1]);\r\n  if (this.info.method === -1) {\r\n    throw new Error('invalid request method');\r\n  }\r\n  if (match[1] === 'CONNECT') {\r\n    this.info.upgrade = true;\r\n  }\r\n  this.info.url = match[2];\r\n  this.info.versionMajor = +match[3];\r\n  this.info.versionMinor = +match[4];\r\n  this.body_bytes = 0;\r\n  this.state = 'HEADER';\r\n};\r\n\r\nvar responseExp = /^HTTP\\/(\\d)\\.(\\d) (\\d{3}) ?(.*)$/;\r\nHTTPParser.prototype.RESPONSE_LINE = function () {\r\n  var line = this.consumeLine();\r\n  if (!line) {\r\n    return;\r\n  }\r\n  var match = responseExp.exec(line);\r\n  if (match === null) {\r\n    throw parseErrorCode('HPE_INVALID_CONSTANT');\r\n  }\r\n  this.info.versionMajor = +match[1];\r\n  this.info.versionMinor = +match[2];\r\n  var statusCode = this.info.statusCode = +match[3];\r\n  this.info.statusMessage = match[4];\r\n  // Implied zero length.\r\n  if ((statusCode / 100 | 0) === 1 || statusCode === 204 || statusCode === 304) {\r\n    this.body_bytes = 0;\r\n  }\r\n  this.state = 'HEADER';\r\n};\r\n\r\nHTTPParser.prototype.shouldKeepAlive = function () {\r\n  if (this.info.versionMajor > 0 && this.info.versionMinor > 0) {\r\n    if (this.connection.indexOf('close') !== -1) {\r\n      return false;\r\n    }\r\n  } else if (this.connection.indexOf('keep-alive') === -1) {\r\n    return false;\r\n  }\r\n  if (this.body_bytes !== null || this.isChunked) { // || skipBody\r\n    return true;\r\n  }\r\n  return false;\r\n};\r\n\r\nHTTPParser.prototype.HEADER = function () {\r\n  var line = this.consumeLine();\r\n  if (line === undefined) {\r\n    return;\r\n  }\r\n  var info = this.info;\r\n  if (line) {\r\n    this.parseHeader(line, info.headers);\r\n  } else {\r\n    var headers = info.headers;\r\n    var hasContentLength = false;\r\n    for (var i = 0; i < headers.length; i += 2) {\r\n      switch (headers[i].toLowerCase()) {\r\n        case 'transfer-encoding':\r\n          this.isChunked = headers[i + 1].toLowerCase() === 'chunked';\r\n          break;\r\n        case 'content-length':\r\n          if (hasContentLength) {\r\n            throw parseErrorCode('HPE_UNEXPECTED_CONTENT_LENGTH');\r\n          }\r\n          hasContentLength = true;\r\n          this.body_bytes = +headers[i + 1];\r\n          break;\r\n        case 'connection':\r\n          this.connection += headers[i + 1].toLowerCase();\r\n          break;\r\n        case 'upgrade':\r\n          info.upgrade = true;\r\n          break;\r\n      }\r\n    }\r\n\r\n    if (this.isChunked && hasContentLength) {\r\n      throw parseErrorCode('HPE_UNEXPECTED_CONTENT_LENGTH');\r\n    }\r\n\r\n    info.shouldKeepAlive = this.shouldKeepAlive();\r\n    //problem which also exists in original node: we should know skipBody before calling onHeadersComplete\r\n    var skipBody;\r\n    if (compatMode0_12) {\r\n      skipBody = this.userCall()(this[kOnHeadersComplete](info));\r\n    } else {\r\n      skipBody = this.userCall()(this[kOnHeadersComplete](info.versionMajor,\r\n          info.versionMinor, info.headers, info.method, info.url, info.statusCode,\r\n          info.statusMessage, info.upgrade, info.shouldKeepAlive));\r\n    }\r\n    if (info.upgrade || skipBody === 2) {\r\n      this.nextRequest();\r\n      return true;\r\n    } else if (this.isChunked && !skipBody) {\r\n      this.state = 'BODY_CHUNKHEAD';\r\n    } else if (skipBody || this.body_bytes === 0) {\r\n      this.nextRequest();\r\n    } else if (this.body_bytes === null) {\r\n      this.state = 'BODY_RAW';\r\n    } else {\r\n      this.state = 'BODY_SIZED';\r\n    }\r\n  }\r\n};\r\n\r\nHTTPParser.prototype.BODY_CHUNKHEAD = function () {\r\n  var line = this.consumeLine();\r\n  if (line === undefined) {\r\n    return;\r\n  }\r\n  this.body_bytes = parseInt(line, 16);\r\n  if (!this.body_bytes) {\r\n    this.state = 'BODY_CHUNKTRAILERS';\r\n  } else {\r\n    this.state = 'BODY_CHUNK';\r\n  }\r\n};\r\n\r\nHTTPParser.prototype.BODY_CHUNK = function () {\r\n  var length = Math.min(this.end - this.offset, this.body_bytes);\r\n  this.userCall()(this[kOnBody](this.chunk, this.offset, length));\r\n  this.offset += length;\r\n  this.body_bytes -= length;\r\n  if (!this.body_bytes) {\r\n    this.state = 'BODY_CHUNKEMPTYLINE';\r\n  }\r\n};\r\n\r\nHTTPParser.prototype.BODY_CHUNKEMPTYLINE = function () {\r\n  var line = this.consumeLine();\r\n  if (line === undefined) {\r\n    return;\r\n  }\r\n  assert.equal(line, '');\r\n  this.state = 'BODY_CHUNKHEAD';\r\n};\r\n\r\nHTTPParser.prototype.BODY_CHUNKTRAILERS = function () {\r\n  var line = this.consumeLine();\r\n  if (line === undefined) {\r\n    return;\r\n  }\r\n  if (line) {\r\n    this.parseHeader(line, this.trailers);\r\n  } else {\r\n    if (this.trailers.length) {\r\n      this.userCall()(this[kOnHeaders](this.trailers, ''));\r\n    }\r\n    this.nextRequest();\r\n  }\r\n};\r\n\r\nHTTPParser.prototype.BODY_RAW = function () {\r\n  var length = this.end - this.offset;\r\n  this.userCall()(this[kOnBody](this.chunk, this.offset, length));\r\n  this.offset = this.end;\r\n};\r\n\r\nHTTPParser.prototype.BODY_SIZED = function () {\r\n  var length = Math.min(this.end - this.offset, this.body_bytes);\r\n  this.userCall()(this[kOnBody](this.chunk, this.offset, length));\r\n  this.offset += length;\r\n  this.body_bytes -= length;\r\n  if (!this.body_bytes) {\r\n    this.nextRequest();\r\n  }\r\n};\r\n\r\n// backward compat to node < 0.11.6\r\n['Headers', 'HeadersComplete', 'Body', 'MessageComplete'].forEach(function (name) {\r\n  var k = HTTPParser['kOn' + name];\r\n  Object.defineProperty(HTTPParser.prototype, 'on' + name, {\r\n    get: function () {\r\n      return this[k];\r\n    },\r\n    set: function (to) {\r\n      // hack for backward compatibility\r\n      this._compatMode0_11 = true;\r\n      return (this[k] = to);\r\n    }\r\n  });\r\n});\r\n\r\nfunction parseErrorCode(code) {\r\n  var err = new Error('Parse Error');\r\n  err.code = code;\r\n  return err;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/http-parser.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_util@0.10.3@util/util.js\n// module id = 5\n// module chunks = 0","/* eslint-enable alphabetize-errors */\r\n\r\n'use strict';\r\n\r\n// The whole point behind this internal module is to allow Node.js to no\r\n// longer be forced to treat every error message change as a semver-major\r\n// change. The NodeError classes here all expose a `code` property whose\r\n// value statically and permanently identifies the error. While the error\r\n// message may change, the code should not.\r\n\r\nconst kCode = Symbol('code');\r\nconst messages = new Map();\r\n\r\n// Lazily loaded\r\nvar assert = null;\r\nvar util = null;\r\n\r\nfunction makeNodeError(Base) {\r\n  return class NodeError extends Base {\r\n    constructor(key, ...args) {\r\n      super(message(key, args));\r\n      this[kCode] = key;\r\n    }\r\n\r\n    get name() {\r\n      return `${super.name} [${this[kCode]}]`;\r\n    }\r\n\r\n    get code() {\r\n      return this[kCode];\r\n    }\r\n  };\r\n}\r\n\r\nclass AssertionError extends Error {\r\n  constructor(options) {\r\n    if (typeof options !== 'object' || options === null) {\r\n      throw new exports.TypeError('ERR_INVALID_ARG_TYPE', 'options', 'object');\r\n    }\r\n    if (options.message) {\r\n      super(options.message);\r\n    } else {\r\n      if (util === null) util = require('util');\r\n      super(`${util.inspect(options.actual).slice(0, 128)} ` +\r\n        `${options.operator} ${util.inspect(options.expected).slice(0, 128)}`);\r\n    }\r\n\r\n    this.generatedMessage = !options.message;\r\n    this.name = 'AssertionError [ERR_ASSERTION]';\r\n    this.code = 'ERR_ASSERTION';\r\n    this.actual = options.actual;\r\n    this.expected = options.expected;\r\n    this.operator = options.operator;\r\n    Error.captureStackTrace(this, options.stackStartFunction);\r\n  }\r\n}\r\n\r\nfunction message(key, args) {\r\n  if (assert === null) assert = require('assert');\r\n  assert.strictEqual(typeof key, 'string');\r\n  const msg = messages.get(key);\r\n  assert(msg, `An invalid error message key was used: ${key}.`);\r\n  let fmt;\r\n  if (typeof msg === 'function') {\r\n    fmt = msg;\r\n  } else {\r\n    if (util === null) util = require('util');\r\n    fmt = util.format;\r\n    if (args === undefined || args.length === 0)\r\n      return msg;\r\n    args.unshift(msg);\r\n  }\r\n  return String(fmt.apply(null, args));\r\n}\r\n\r\n// Utility function for registering the error codes. Only used here. Exported\r\n// *only* to allow for testing.\r\nfunction E(sym, val) {\r\n  messages.set(sym, typeof val === 'function' ? val : String(val));\r\n}\r\n\r\nmodule.exports = {\r\n  message,\r\n  Error: makeNodeError(Error),\r\n  TypeError: makeNodeError(TypeError),\r\n  RangeError: makeNodeError(RangeError),\r\n  AssertionError,\r\n  E // This is exported only to facilitate testing.\r\n};\r\n\r\n// To declare an error message, use the E(sym, val) function above. The sym\r\n// must be an upper case string. The val can be either a function or a string.\r\n// The return value of the function must be a string.\r\n// Examples:\r\n// E('EXAMPLE_KEY1', 'This is the error value');\r\n// E('EXAMPLE_KEY2', (a, b) => return `${a} ${b}`);\r\n//\r\n// Once an error code has been assigned, the code itself MUST NOT change and\r\n// any given error code must never be reused to identify a different error.\r\n//\r\n// Any error code added here should also be added to the documentation\r\n//\r\n// Note: Please try to keep these in alphabetical order\r\nE('ERR_ARG_NOT_ITERABLE', '%s must be iterable');\r\nE('ERR_ASSERTION', '%s');\r\nE('ERR_ASYNC_CALLBACK', (name) => `${name} must be a function`);\r\nE('ERR_ASYNC_TYPE', (s) => `Invalid name for async \"type\": ${s}`);\r\nE('ERR_BUFFER_OUT_OF_BOUNDS', bufferOutOfBounds);\r\nE('ERR_CHILD_CLOSED_BEFORE_REPLY', 'Child closed before reply received');\r\nE('ERR_CONSOLE_WRITABLE_STREAM',\r\n  'Console expects a writable stream instance for %s');\r\nE('ERR_CPU_USAGE', 'Unable to obtain cpu usage %s');\r\nE('ERR_DNS_SET_SERVERS_FAILED', (err, servers) =>\r\n  `c-ares failed to set servers: \"${err}\" [${servers}]`);\r\nE('ERR_ENCODING_INVALID_ENCODED_DATA',\r\n  (enc) => `The encoded data was not valid for encoding ${enc}`);\r\nE('ERR_ENCODING_NOT_SUPPORTED',\r\n  (enc) => `The \"${enc}\" encoding is not supported`);\r\nE('ERR_FALSY_VALUE_REJECTION', 'Promise was rejected with falsy value');\r\nE('ERR_HTTP_HEADERS_SENT',\r\n  'Cannot %s headers after they are sent to the client');\r\nE('ERR_HTTP_INVALID_CHAR', 'Invalid character in statusMessage.');\r\nE('ERR_HTTP_INVALID_STATUS_CODE',\r\n  (originalStatusCode) => `Invalid status code: ${originalStatusCode}`);\r\nE('ERR_HTTP_TRAILER_INVALID',\r\n  'Trailers are invalid with this transfer encoding');\r\nE('ERR_HTTP2_CONNECT_AUTHORITY',\r\n  ':authority header is required for CONNECT requests');\r\nE('ERR_HTTP2_CONNECT_PATH',\r\n  'The :path header is forbidden for CONNECT requests');\r\nE('ERR_HTTP2_CONNECT_SCHEME',\r\n  'The :scheme header is forbidden for CONNECT requests');\r\nE('ERR_HTTP2_FRAME_ERROR',\r\n  (type, code, id) => {\r\n    let msg = `Error sending frame type ${type}`;\r\n    if (id !== undefined)\r\n      msg += ` for stream ${id}`;\r\n    msg += ` with code ${code}`;\r\n    return msg;\r\n  });\r\nE('ERR_HTTP2_HEADER_REQUIRED',\r\n  (name) => `The ${name} header is required`);\r\nE('ERR_HTTP2_HEADER_SINGLE_VALUE',\r\n  (name) => `Header field \"${name}\" must have only a single value`);\r\nE('ERR_HTTP2_HEADERS_AFTER_RESPOND',\r\n  'Cannot specify additional headers after response initiated');\r\nE('ERR_HTTP2_HEADERS_OBJECT', 'Headers must be an object');\r\nE('ERR_HTTP2_HEADERS_SENT', 'Response has already been initiated.');\r\nE('ERR_HTTP2_INFO_HEADERS_AFTER_RESPOND',\r\n  'Cannot send informational headers after the HTTP message has been sent');\r\nE('ERR_HTTP2_INFO_STATUS_NOT_ALLOWED',\r\n  'Informational status codes cannot be used');\r\nE('ERR_HTTP2_INVALID_CONNECTION_HEADERS',\r\n  'HTTP/1 Connection specific headers are forbidden');\r\nE('ERR_HTTP2_INVALID_HEADER_VALUE', 'Value must not be undefined or null');\r\nE('ERR_HTTP2_INVALID_INFO_STATUS',\r\n  (code) => `Invalid informational status code: ${code}`);\r\nE('ERR_HTTP2_INVALID_PACKED_SETTINGS_LENGTH',\r\n  'Packed settings length must be a multiple of six');\r\nE('ERR_HTTP2_INVALID_PSEUDOHEADER',\r\n  (name) => `\"${name}\" is an invalid pseudoheader or is used incorrectly`);\r\nE('ERR_HTTP2_INVALID_SESSION', 'The session has been destroyed');\r\nE('ERR_HTTP2_INVALID_SETTING_VALUE',\r\n  (name, value) => `Invalid value for setting \"${name}\": ${value}`);\r\nE('ERR_HTTP2_INVALID_STREAM', 'The stream has been destroyed');\r\nE('ERR_HTTP2_MAX_PENDING_SETTINGS_ACK',\r\n  (max) => `Maximum number of pending settings acknowledgements (${max})`);\r\nE('ERR_HTTP2_OUT_OF_STREAMS',\r\n  'No stream ID is available because maximum stream ID has been reached');\r\nE('ERR_HTTP2_PAYLOAD_FORBIDDEN',\r\n  (code) => `Responses with ${code} status must not have a payload`);\r\nE('ERR_HTTP2_PSEUDOHEADER_NOT_ALLOWED', 'Cannot set HTTP/2 pseudo-headers');\r\nE('ERR_HTTP2_PUSH_DISABLED', 'HTTP/2 client has disabled push streams');\r\nE('ERR_HTTP2_SEND_FILE', 'Only regular files can be sent');\r\nE('ERR_HTTP2_SOCKET_BOUND',\r\n  'The socket is already bound to an Http2Session');\r\nE('ERR_HTTP2_STATUS_101',\r\n  'HTTP status code 101 (Switching Protocols) is forbidden in HTTP/2');\r\nE('ERR_HTTP2_STATUS_INVALID',\r\n  (code) => `Invalid status code: ${code}`);\r\nE('ERR_HTTP2_STREAM_CLOSED', 'The stream is already closed');\r\nE('ERR_HTTP2_STREAM_ERROR',\r\n  (code) => `Stream closed with error code ${code}`);\r\nE('ERR_HTTP2_STREAM_SELF_DEPENDENCY', 'A stream cannot depend on itself');\r\nE('ERR_HTTP2_UNSUPPORTED_PROTOCOL',\r\n  (protocol) => `protocol \"${protocol}\" is unsupported.`);\r\nE('ERR_INDEX_OUT_OF_RANGE', 'Index out of range');\r\nE('ERR_INVALID_ARG_TYPE', invalidArgType);\r\nE('ERR_INVALID_ARRAY_LENGTH',\r\n  (name, len, actual) => {\r\n    assert.strictEqual(typeof actual, 'number');\r\n    return `The array \"${name}\" (length ${actual}) must be of length ${len}.`;\r\n  });\r\nE('ERR_INVALID_ASYNC_ID', (type, id) => `Invalid ${type} value: ${id}`);\r\nE('ERR_INVALID_BUFFER_SIZE', 'Buffer size must be a multiple of %s');\r\nE('ERR_INVALID_CALLBACK', 'Callback must be a function');\r\nE('ERR_INVALID_CHAR', invalidChar);\r\nE('ERR_INVALID_CURSOR_POS',\r\n  'Cannot set cursor row without setting its column');\r\nE('ERR_INVALID_DOMAIN_NAME', 'Unable to determine the domain name');\r\nE('ERR_INVALID_FD', '\"fd\" must be a positive integer: %s');\r\nE('ERR_INVALID_FILE_URL_HOST',\r\n  'File URL host must be \"localhost\" or empty on %s');\r\nE('ERR_INVALID_FILE_URL_PATH', 'File URL path %s');\r\nE('ERR_INVALID_HANDLE_TYPE', 'This handle type cannot be sent');\r\nE('ERR_INVALID_HTTP_TOKEN', '%s must be a valid HTTP token [\"%s\"]');\r\nE('ERR_INVALID_IP_ADDRESS', 'Invalid IP address: %s');\r\nE('ERR_INVALID_OPT_VALUE',\r\n  (name, value) => {\r\n    return `The value \"${String(value)}\" is invalid for option \"${name}\"`;\r\n  });\r\nE('ERR_INVALID_OPT_VALUE_ENCODING',\r\n  (value) => `The value \"${String(value)}\" is invalid for option \"encoding\"`);\r\nE('ERR_INVALID_PERFORMANCE_MARK', 'The \"%s\" performance mark has not been set');\r\nE('ERR_INVALID_PROTOCOL', (protocol, expectedProtocol) =>\r\n  `Protocol \"${protocol}\" not supported. Expected \"${expectedProtocol}\"`);\r\nE('ERR_INVALID_REPL_EVAL_CONFIG',\r\n  'Cannot specify both \"breakEvalOnSigint\" and \"eval\" for REPL');\r\nE('ERR_INVALID_SYNC_FORK_INPUT',\r\n  'Asynchronous forks do not support Buffer, Uint8Array or string input: %s');\r\nE('ERR_INVALID_THIS', 'Value of \"this\" must be of type %s');\r\nE('ERR_INVALID_TUPLE', '%s must be an iterable %s tuple');\r\nE('ERR_INVALID_URL', 'Invalid URL: %s');\r\nE('ERR_INVALID_URL_SCHEME',\r\n  (expected) => `The URL must be ${oneOf(expected, 'scheme')}`);\r\nE('ERR_IPC_CHANNEL_CLOSED', 'Channel closed');\r\nE('ERR_IPC_DISCONNECTED', 'IPC channel is already disconnected');\r\nE('ERR_IPC_ONE_PIPE', 'Child process can have only one IPC pipe');\r\nE('ERR_IPC_SYNC_FORK', 'IPC cannot be used with synchronous forks');\r\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented');\r\nE('ERR_MISSING_ARGS', missingArgs);\r\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times');\r\nE('ERR_NAPI_CONS_FUNCTION', 'Constructor must be a function');\r\nE('ERR_NAPI_CONS_PROTOTYPE_OBJECT', 'Constructor.prototype must be an object');\r\nE('ERR_NO_CRYPTO', 'Node.js is not compiled with OpenSSL crypto support');\r\nE('ERR_NO_ICU', '%s is not supported on Node.js compiled without ICU');\r\nE('ERR_NO_LONGER_SUPPORTED', '%s is no longer supported');\r\nE('ERR_OUTOFMEMORY', 'Out of memory');\r\nE('ERR_PARSE_HISTORY_DATA', 'Could not parse history data in %s');\r\nE('ERR_SOCKET_ALREADY_BOUND', 'Socket is already bound');\r\nE('ERR_SOCKET_BAD_PORT', 'Port should be > 0 and < 65536');\r\nE('ERR_SOCKET_BAD_TYPE',\r\n  'Bad socket type specified. Valid types are: udp4, udp6');\r\nE('ERR_SOCKET_CANNOT_SEND', 'Unable to send data');\r\nE('ERR_SOCKET_CLOSED', 'Socket is closed');\r\nE('ERR_SOCKET_DGRAM_NOT_RUNNING', 'Not running');\r\nE('ERR_STDERR_CLOSE', 'process.stderr cannot be closed');\r\nE('ERR_STDOUT_CLOSE', 'process.stdout cannot be closed');\r\nE('ERR_STREAM_WRAP', 'Stream has StringDecoder set or is in objectMode');\r\nE('ERR_TLS_CERT_ALTNAME_INVALID',\r\n  'Hostname/IP does not match certificate\\'s altnames: %s');\r\nE('ERR_TLS_DH_PARAM_SIZE', (size) =>\r\n  `DH parameter size ${size} is less than 2048`);\r\nE('ERR_TLS_HANDSHAKE_TIMEOUT', 'TLS handshake timeout');\r\nE('ERR_TLS_RENEGOTIATION_FAILED', 'Failed to renegotiate');\r\nE('ERR_TLS_REQUIRED_SERVER_NAME',\r\n  '\"servername\" is required parameter for Server.addContext');\r\nE('ERR_TLS_SESSION_ATTACK', 'TSL session renegotiation attack detected');\r\nE('ERR_TRANSFORM_ALREADY_TRANSFORMING',\r\n  'Calling transform done when still transforming');\r\nE('ERR_TRANSFORM_WITH_LENGTH_0',\r\n  'Calling transform done when writableState.length != 0');\r\nE('ERR_UNESCAPED_CHARACTERS',\r\n  (name) => `${name} contains unescaped characters`);\r\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s');\r\nE('ERR_UNKNOWN_SIGNAL', 'Unknown signal: %s');\r\nE('ERR_UNKNOWN_STDIN_TYPE', 'Unknown stdin file type');\r\nE('ERR_UNKNOWN_STREAM_TYPE', 'Unknown stream file type');\r\nE('ERR_VALUE_OUT_OF_RANGE', (start, end, value) => {\r\n  return `The value of \"${start}\" must be ${end}. Received \"${value}\"`;\r\n});\r\nE('ERR_V8BREAKITERATOR', 'Full ICU data not installed. ' +\r\n  'See https://github.com/nodejs/node/wiki/Intl');\r\nE('ERR_VALID_PERFORMANCE_ENTRY_TYPE',\r\n  'At least one valid performance entry type is required');\r\nE('ERR_VALUE_OUT_OF_RANGE', 'The value of \"%s\" must be %s. Received \"%s\"');\r\n\r\nfunction invalidArgType(name, expected, actual) {\r\n  assert(name, 'name is required');\r\n\r\n  // determiner: 'must be' or 'must not be'\r\n  let determiner;\r\n  if (expected.includes('not ')) {\r\n    determiner = 'must not be';\r\n    expected = expected.split('not ')[1];\r\n  } else {\r\n    determiner = 'must be';\r\n  }\r\n\r\n  let msg;\r\n  if (Array.isArray(name)) {\r\n    var names = name.map((val) => `\"${val}\"`).join(', ');\r\n    msg = `The ${names} arguments ${determiner} ${oneOf(expected, 'type')}`;\r\n  } else if (name.includes(' argument')) {\r\n    // for the case like 'first argument'\r\n    msg = `The ${name} ${determiner} ${oneOf(expected, 'type')}`;\r\n  } else {\r\n    const type = name.includes('.') ? 'property' : 'argument';\r\n    msg = `The \"${name}\" ${type} ${determiner} ${oneOf(expected, 'type')}`;\r\n  }\r\n\r\n  // if actual value received, output it\r\n  if (arguments.length >= 3) {\r\n    msg += `. Received type ${actual !== null ? typeof actual : 'null'}`;\r\n  }\r\n  return msg;\r\n}\r\n\r\nfunction missingArgs(...args) {\r\n  assert(args.length > 0, 'At least one arg needs to be specified');\r\n  let msg = 'The ';\r\n  const len = args.length;\r\n  args = args.map((a) => `\"${a}\"`);\r\n  switch (len) {\r\n    case 1:\r\n      msg += `${args[0]} argument`;\r\n      break;\r\n    case 2:\r\n      msg += `${args[0]} and ${args[1]} arguments`;\r\n      break;\r\n    default:\r\n      msg += args.slice(0, len - 1).join(', ');\r\n      msg += `, and ${args[len - 1]} arguments`;\r\n      break;\r\n  }\r\n  return `${msg} must be specified`;\r\n}\r\n\r\nfunction oneOf(expected, thing) {\r\n  assert(expected, 'expected is required');\r\n  assert(typeof thing === 'string', 'thing is required');\r\n  if (Array.isArray(expected)) {\r\n    const len = expected.length;\r\n    assert(len > 0, 'At least one expected value needs to be specified');\r\n    expected = expected.map((i) => String(i));\r\n    if (len > 2) {\r\n      return `one of ${thing} ${expected.slice(0, len - 1).join(', ')}, or ` +\r\n             expected[len - 1];\r\n    } else if (len === 2) {\r\n      return `one of ${thing} ${expected[0]} or ${expected[1]}`;\r\n    } else {\r\n      return `of ${thing} ${expected[0]}`;\r\n    }\r\n  } else {\r\n    return `of ${thing} ${String(expected)}`;\r\n  }\r\n}\r\n\r\nfunction bufferOutOfBounds(name, isWriting) {\r\n  if (isWriting) {\r\n    return 'Attempt to write outside buffer bounds';\r\n  } else {\r\n    return `\"${name}\" is outside of buffer bounds`;\r\n  }\r\n}\r\n\r\nfunction invalidChar(name, field) {\r\n  let msg = `Invalid character in ${name}`;\r\n  if (field) {\r\n    msg += ` [\"${field}\"]`;\r\n  }\r\n  return msg;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/errors.js","import ServiceCommand from './service_command'\r\nimport ClientCommand from './client_command'\r\nimport EventEmitter from './EventEmitter';\r\nimport {debug, continueExpression} from './common'\r\nimport ClientRequest from './client_request'\r\n\r\nclass Connection extends EventEmitter {\r\n    constructor(socket, app) {\r\n        super();\r\n        let self = this;\r\n        this.on('chunk', (chunk) => {\r\n            let m = _parse(chunk);\r\n            if (m) {\r\n                self['on_incoming_' + m.type](m.data, m.id, m.last);\r\n            }\r\n        });\r\n        this.on('finish', (id) => {\r\n            delete this.scommand[id];\r\n        });\r\n\r\n        this.on('client_request', (request, id) => {\r\n            let cmd = this.ccommand[id];\r\n            if (!cmd) {\r\n                this.ccommand[id] = new ClientCommand(this, id);\r\n                cmd = this.ccommand[id];\r\n                cmd.maxHeaderPairs = this.maxHeaderPairs;\r\n                cmd.setFlush(request);\r\n                var self = this;\r\n\r\n                request.on('timeout_notify', () => {\r\n                    debug('client request timeout, id: ' + id);\r\n                    request.emit('timeout');\r\n                    delete self.ccommand[id];\r\n                });\r\n            }\r\n        });\r\n\r\n        this.socket = socket;\r\n        this.app = app;\r\n        this.scommand = {}; //service command\r\n        this.ccommand = {}; //client command\r\n\r\n        // Propagate headers limit from server instance to parser\r\n        if (typeof app.maxHeadersCount === 'number') {\r\n            this.maxHeaderPairs = app.maxHeadersCount << 1;\r\n        } else {\r\n            // Set default value because parser may be reused from FreeList\r\n            this.maxHeaderPairs = 2000;\r\n        }\r\n\r\n    }\r\n\r\n    flushOut(data, encoding) {\r\n        socket.send(chunk);\r\n    }\r\n\r\n    on_incoming_request(data, id, last) {\r\n        let cmd = this.scommand[id];\r\n        if (!cmd) {\r\n            cmd = new ServiceCommand(this, id);\r\n            this.scommand[id] = cmd;\r\n            cmd.maxHeaderPairs = this.maxHeaderPairs;\r\n\r\n            var self = this;\r\n            cmd.on('timeout_notify', () => {\r\n                debug('service command timeout, id: ' + id);\r\n                delete self.scommand[id];\r\n            });\r\n            cmd.on('finish', () => {\r\n                delete self.scommand[id];\r\n            });\r\n        }\r\n        cmd.emit('chunk', data, last);\r\n    }\r\n\r\n    on_incoming_response(data, id, last) {\r\n        let cmd = this.ccommand[id];\r\n        if (cmd) {\r\n            cmd.emit('chunk', data, last);\r\n        }\r\n    }\r\n}\r\n\r\nfunction _parse(chunk) {\r\n    const _CONLON = 0x3A; // :\r\n    const _CR = 0x0D; //\\r\r\n    const _LF = 0x0A; //\\n\r\n\r\n    if (!chunk || chunk[0] !== _CONLON) {\r\n        debug('Invalide message');\r\n        return;\r\n    }\r\n\r\n    let n = chunk.indexOf(_CR, 1);\r\n    if (n === -1)\r\n        return;\r\n    let line = chunk.toString('ascii', 1, n);\r\n\r\n    let pattern = /(request|response|message)\\s+([0-9]+)\\s*([0-9]+)?/;\r\n    let arr = pattern.exec(line)\r\n    if (arr === null) {\r\n        debug('Invalid command line:', line);\r\n        return;\r\n    }\r\n    let type = arr[1];\r\n    let id = Number(arr[2]);\r\n    let last = arr[3] === undefined ? true : false;\r\n    let data = chunk.slice(n + 2);\r\n    return {\r\n        type,\r\n        id,\r\n        last,\r\n        data\r\n    };\r\n}\r\n\r\nvar sconn_list = {};\r\nvar cconn_list = {};\r\n\r\nfunction getConnection(name, arg) {\r\n    if (arg === undefined) {\r\n        return cconn_list[name];\r\n    } else {\r\n        return sconn_list[name];\r\n    }\r\n}\r\n\r\nfunction addConnection(name, conn, arg) {\r\n    if (arg === undefined) {\r\n        if (cconn_list[name]) {\r\n            return;\r\n        }\r\n        cconn_list[name] = conn;\r\n    } else {\r\n        if (sconn_list[name]) {\r\n            return;\r\n        }\r\n        sconn_list[name] = conn;\r\n    }\r\n}\r\n\r\nfunction removeConnection(name, arg) {\r\n    if (arg === undefined) {\r\n        delete cconn_list[name];\r\n    } else {\r\n        delete sconn_list[name];\r\n    }\r\n}\r\n\r\nvar _request_counter = 0;\r\n\r\nfunction request(options, cb, arg) {\r\n    var client_request = new ClientRequest(options, cb);\r\n    var name = client_request.getHeader('host');\r\n    var id = client_request.getHeader('CSeq');\r\n    var conn = getConnection(name, arg);\r\n    if (conn === undefined || conn === null) {\r\n        throw new Error('The connection hasn\\'t been established with: ' + name);\r\n    }\r\n\r\n    conn.emit('client_request', client_request, id);\r\n    return client_request;\r\n}\r\n\r\nexport {\r\n    Connection,\r\n    getConnection,\r\n    addConnection,\r\n    removeConnection,\r\n    request\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/connection.js","import EventEmitter from './EventEmitter';\r\n\r\nimport {HTTPParser, HttpMethods} from './http-parser'\r\n\r\nimport IncomingMessage from './http_incoming'\r\n\r\nimport OBuf from './obuf'\r\n\r\nconst kOnHeaders = HTTPParser.kOnHeaders | 0;\r\nconst kOnHeadersComplete = HTTPParser.kOnHeadersComplete | 0;\r\nconst kOnBody = HTTPParser.kOnBody | 0;\r\nconst kOnMessageComplete = HTTPParser.kOnMessageComplete | 0;\r\nconst kOnExecute = HTTPParser.kOnExecute | 0;\r\n\r\n// the offset buffer is to store the prefix\r\n// the real data is stored starting from the offset\r\n// const OBUF_HTTP_OFFSET=64;\r\n\r\nexport default class Command extends EventEmitter {\r\n    constructor(c, id, itype) {\r\n        super();\r\n        this.connection = c;\r\n        this.app = c.app;\r\n        this.Id = id;\r\n        // this.chunkId = null;\r\n\r\n        this._incoming = null;\r\n        this._outgoing = null;\r\n        this._type = itype;\r\n        this._parser = this._createParser(itype);\r\n        this._obuf = null;\r\n        // var n = Math.max( Buffer.poolSize/2, 1024 );\r\n        // this._obuf   = Buffer.allocUnsafe(n);\r\n        // // this._obufHtt   = this._obuf(OBUF_HTTP_OFFSET);\r\n        // this._offset = OBUF_HTTP_OFFSET;\r\n\r\n        this.on('chunk', (data, last) => {\r\n            // console.log(data.toString()+'\\n~~~~~~~~~~~');\r\n            var ret = this._parser.execute(data);\r\n            this._onParserExecuteCommon(ret, data, last);\r\n        });\r\n    }\r\n\r\n    _createParser(type) {\r\n        //assert(type == HTTPParser.REQUEST || HTTPParser.RESPONSE)\r\n\r\n        var parser = new HTTPParser(type);\r\n\r\n        parser._headers = [];\r\n        parser._url = '';\r\n        //        parser._consumed = false;\r\n        //\r\n        //        parser.socket = null;\r\n        //        parser.incoming = null;\r\n        //        parser.outgoing = null;\r\n\r\n        // Only called in the slow case where slow means\r\n        // that the request headers were either fragmented\r\n        // across multiple TCP packets or too large to be\r\n        // processed in a single run. This method is also\r\n        // called to process trailing HTTP headers.\r\n        parser[kOnHeaders] = parserOnHeaders.bind(this);\r\n        parser[kOnHeadersComplete] = parserOnHeadersComplete.bind(this);\r\n        parser[kOnBody] = parserOnBody.bind(this);\r\n        parser[kOnMessageComplete] = parserOnMessageComplete.bind(this);\r\n        parser[kOnExecute] = null;\r\n\r\n        //        var parser = parsers.alloc();\r\n        //        parser.reinitialize(HTTPParser.REQUEST);\r\n        //        parser.socket = this.socket;\r\n        //        parser.incoming = null;\r\n        //        parser.Id = id;\r\n        //        parser.connection=this;\r\n        //        this.requests[id]=parser;\r\n        parser.onIncoming = this._parserOnIncoming.bind(this);\r\n        parser[kOnExecute] = this._onParserExecute;\r\n        return parser;\r\n    }\r\n\r\n    // _onchunk(data, last) {\r\n    //     var ret = this.parser.execute(d);\r\n    //     this._onParserExecuteCommon(ret, d, last);\r\n    // }\r\n\r\n    _parserOnIncoming(req, keepAlive) {\r\n        throw new Error(\"NotImplement:parserOnIncoming\");\r\n    }\r\n    _parserOnIncoming() {\r\n        throw new Error(\"NotImplement:onParserExecute\");\r\n    }\r\n    _onParserExecuteCommon() {};\r\n\r\n    //the function `write` here will only be used for server response now.\r\n    write(data, encoding) {\r\n        if (this._obuf == null) {\r\n            var prefix;\r\n            if (this._type == HTTPParser.REQUEST) {\r\n                prefix = ':response ';\r\n            } else {\r\n                prefix = ':request ';\r\n            }\r\n            this._obuf = new OBuf(prefix + this.Id, this.connection.socket);\r\n        }\r\n\r\n        this._obuf.append(data, encoding);\r\n        return;\r\n    }\r\n}\r\n\r\n// Only called in the slow case where slow means\r\n// that the request headers were either fragmented\r\n// across multiple TCP packets or too large to be\r\n// processed in a single run. This method is also\r\n// called to process trailing HTTP headers.\r\nfunction parserOnHeaders(headers, url) {\r\n    // Once we exceeded headers limit - stop collecting them\r\n    if (this.maxHeaderPairs <= 0 ||\r\n        this._headers.length < this.maxHeaderPairs) {\r\n        this._headers = this._headers.concat(headers);\r\n    }\r\n    this._url += url;\r\n}\r\n\r\n\r\n// `headers` and `url` are set only if .onHeaders() has not been called for\r\n// this request.\r\n// `url` is not set for response parsers but that's not applicable here since\r\n// all our parsers are request parsers.\r\nfunction parserOnHeadersComplete(versionMajor, versionMinor, headers, method,\r\n                                 url, statusCode, statusMessage, upgrade,\r\n                                 shouldKeepAlive) {\r\n    var parser = this._parser;\r\n\r\n    if (!headers) {\r\n        headers = parser._headers;\r\n        parser._headers = [];\r\n    }\r\n\r\n    if (!url) {\r\n        url = parser._url;\r\n        parser._url = '';\r\n    }\r\n\r\n\r\n    var incoming = this._incoming = new IncomingMessage();\r\n\r\n\r\n    incoming.httpVersionMajor = versionMajor;\r\n    incoming.httpVersionMinor = versionMinor;\r\n    incoming.httpVersion = versionMajor + '.' + versionMinor;\r\n    incoming.url = url;\r\n\r\n    var n = headers.length;\r\n\r\n    // If parser.maxHeaderPairs <= 0 assume that there's no limit.\r\n    if (this.maxHeaderPairs > 0)\r\n        n = Math.min(n, this.maxHeaderPairs);\r\n\r\n    incoming._addHeaderLines(headers, n);\r\n\r\n    if (typeof method === 'number') {\r\n        // server only\r\n        incoming.method = HttpMethods[method];\r\n    } else {\r\n        // client only\r\n        incoming.statusCode = statusCode;\r\n        incoming.statusMessage = statusMessage;\r\n    }\r\n    var outgoing = this._outgoing;\r\n\r\n    if (upgrade && outgoing !== null && !outgoing.upgrading) {\r\n        // The client made non-upgrade request, and server is just advertising\r\n        // supported protocols.\r\n        //\r\n        // See RFC7230 Section 6.7\r\n        upgrade = false;\r\n    }\r\n\r\n    incoming.upgrade = upgrade;\r\n\r\n    var skipBody = 0; // response to HEAD or CONNECT\r\n\r\n    if (!upgrade) {\r\n        // For upgraded connections and CONNECT method request, we'll emit this\r\n        // after parser.execute so that we can capture the first part of the new\r\n        // protocol.\r\n        skipBody = parser.onIncoming(incoming, shouldKeepAlive);\r\n    }\r\n\r\n    if (typeof skipBody !== 'number')\r\n        return skipBody ? 1 : 0;\r\n    else\r\n        return skipBody;\r\n}\r\n\r\n\r\n// XXX This is a mess.\r\n// TODO: http.Parser should be a Writable emits request/response events.\r\nfunction parserOnBody(b, start, len) {\r\n    var parser = this._parser;\r\n    var stream = this._incoming;\r\n\r\n    // if the stream has already been removed, then drop it.\r\n    if (!stream)\r\n        return;\r\n\r\n    //-    var socket = stream.socket;\r\n\r\n    // pretend this was the result of a stream._read call.\r\n    if (len > 0 && !stream._dumped) {\r\n        var slice = b.slice(start, start + len);\r\n        var ret = stream.push(slice);\r\n        //-- if (!ret)\r\n        //--   readStop(socket);\r\n    }\r\n}\r\n\r\n\r\nfunction parserOnMessageComplete() {\r\n    var parser = this._parser;\r\n    var stream = this._incoming;\r\n\r\n    if (stream) {\r\n        stream.complete = true;\r\n        // Emit any trailing headers.\r\n        var headers = parser._headers;\r\n        if (headers) {\r\n            stream._addHeaderLines(headers, headers.length);\r\n            parser._headers = [];\r\n            parser._url = '';\r\n        }\r\n\r\n        // For emit end event\r\n        stream.push(null);\r\n    }\r\n    /* TODEL:\r\n      // force to read the next incoming message\r\n      readStart(parser.socket);\r\n    */\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/command.js","'use strict';\n\n// compare and isBuffer taken from https://github.com/feross/buffer/blob/680e9e5e488f22aac27599a57dc844a6315928dd/index.js\n// original notice:\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\nfunction compare(a, b) {\n  if (a === b) {\n    return 0;\n  }\n\n  var x = a.length;\n  var y = b.length;\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i];\n      y = b[i];\n      break;\n    }\n  }\n\n  if (x < y) {\n    return -1;\n  }\n  if (y < x) {\n    return 1;\n  }\n  return 0;\n}\nfunction isBuffer(b) {\n  if (global.Buffer && typeof global.Buffer.isBuffer === 'function') {\n    return global.Buffer.isBuffer(b);\n  }\n  return !!(b != null && b._isBuffer);\n}\n\n// based on node assert, original notice:\n\n// http://wiki.commonjs.org/wiki/Unit_Testing/1.0\n//\n// THIS IS NOT TESTED NOR LIKELY TO WORK OUTSIDE V8!\n//\n// Originally from narwhal.js (http://narwhaljs.org)\n// Copyright (c) 2009 Thomas Robinson <280north.com>\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the 'Software'), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN\n// ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar util = require('util/');\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar pSlice = Array.prototype.slice;\nvar functionsHaveNames = (function () {\n  return function foo() {}.name === 'foo';\n}());\nfunction pToString (obj) {\n  return Object.prototype.toString.call(obj);\n}\nfunction isView(arrbuf) {\n  if (isBuffer(arrbuf)) {\n    return false;\n  }\n  if (typeof global.ArrayBuffer !== 'function') {\n    return false;\n  }\n  if (typeof ArrayBuffer.isView === 'function') {\n    return ArrayBuffer.isView(arrbuf);\n  }\n  if (!arrbuf) {\n    return false;\n  }\n  if (arrbuf instanceof DataView) {\n    return true;\n  }\n  if (arrbuf.buffer && arrbuf.buffer instanceof ArrayBuffer) {\n    return true;\n  }\n  return false;\n}\n// 1. The assert module provides functions that throw\n// AssertionError's when particular conditions are not met. The\n// assert module must conform to the following interface.\n\nvar assert = module.exports = ok;\n\n// 2. The AssertionError is defined in assert.\n// new assert.AssertionError({ message: message,\n//                             actual: actual,\n//                             expected: expected })\n\nvar regex = /\\s*function\\s+([^\\(\\s]*)\\s*/;\n// based on https://github.com/ljharb/function.prototype.name/blob/adeeeec8bfcc6068b187d7d9fb3d5bb1d3a30899/implementation.js\nfunction getName(func) {\n  if (!util.isFunction(func)) {\n    return;\n  }\n  if (functionsHaveNames) {\n    return func.name;\n  }\n  var str = func.toString();\n  var match = str.match(regex);\n  return match && match[1];\n}\nassert.AssertionError = function AssertionError(options) {\n  this.name = 'AssertionError';\n  this.actual = options.actual;\n  this.expected = options.expected;\n  this.operator = options.operator;\n  if (options.message) {\n    this.message = options.message;\n    this.generatedMessage = false;\n  } else {\n    this.message = getMessage(this);\n    this.generatedMessage = true;\n  }\n  var stackStartFunction = options.stackStartFunction || fail;\n  if (Error.captureStackTrace) {\n    Error.captureStackTrace(this, stackStartFunction);\n  } else {\n    // non v8 browsers so we can have a stacktrace\n    var err = new Error();\n    if (err.stack) {\n      var out = err.stack;\n\n      // try to strip useless frames\n      var fn_name = getName(stackStartFunction);\n      var idx = out.indexOf('\\n' + fn_name);\n      if (idx >= 0) {\n        // once we have located the function frame\n        // we need to strip out everything before it (and its line)\n        var next_line = out.indexOf('\\n', idx + 1);\n        out = out.substring(next_line + 1);\n      }\n\n      this.stack = out;\n    }\n  }\n};\n\n// assert.AssertionError instanceof Error\nutil.inherits(assert.AssertionError, Error);\n\nfunction truncate(s, n) {\n  if (typeof s === 'string') {\n    return s.length < n ? s : s.slice(0, n);\n  } else {\n    return s;\n  }\n}\nfunction inspect(something) {\n  if (functionsHaveNames || !util.isFunction(something)) {\n    return util.inspect(something);\n  }\n  var rawname = getName(something);\n  var name = rawname ? ': ' + rawname : '';\n  return '[Function' +  name + ']';\n}\nfunction getMessage(self) {\n  return truncate(inspect(self.actual), 128) + ' ' +\n         self.operator + ' ' +\n         truncate(inspect(self.expected), 128);\n}\n\n// At present only the three keys mentioned above are used and\n// understood by the spec. Implementations or sub modules can pass\n// other keys to the AssertionError's constructor - they will be\n// ignored.\n\n// 3. All of the following functions must throw an AssertionError\n// when a corresponding condition is not met, with a message that\n// may be undefined if not provided.  All assertion methods provide\n// both the actual and expected values to the assertion error for\n// display purposes.\n\nfunction fail(actual, expected, message, operator, stackStartFunction) {\n  throw new assert.AssertionError({\n    message: message,\n    actual: actual,\n    expected: expected,\n    operator: operator,\n    stackStartFunction: stackStartFunction\n  });\n}\n\n// EXTENSION! allows for well behaved errors defined elsewhere.\nassert.fail = fail;\n\n// 4. Pure assertion tests whether a value is truthy, as determined\n// by !!guard.\n// assert.ok(guard, message_opt);\n// This statement is equivalent to assert.equal(true, !!guard,\n// message_opt);. To test strictly for the value true, use\n// assert.strictEqual(true, guard, message_opt);.\n\nfunction ok(value, message) {\n  if (!value) fail(value, true, message, '==', assert.ok);\n}\nassert.ok = ok;\n\n// 5. The equality assertion tests shallow, coercive equality with\n// ==.\n// assert.equal(actual, expected, message_opt);\n\nassert.equal = function equal(actual, expected, message) {\n  if (actual != expected) fail(actual, expected, message, '==', assert.equal);\n};\n\n// 6. The non-equality assertion tests for whether two objects are not equal\n// with != assert.notEqual(actual, expected, message_opt);\n\nassert.notEqual = function notEqual(actual, expected, message) {\n  if (actual == expected) {\n    fail(actual, expected, message, '!=', assert.notEqual);\n  }\n};\n\n// 7. The equivalence assertion tests a deep equality relation.\n// assert.deepEqual(actual, expected, message_opt);\n\nassert.deepEqual = function deepEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'deepEqual', assert.deepEqual);\n  }\n};\n\nassert.deepStrictEqual = function deepStrictEqual(actual, expected, message) {\n  if (!_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'deepStrictEqual', assert.deepStrictEqual);\n  }\n};\n\nfunction _deepEqual(actual, expected, strict, memos) {\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n  } else if (isBuffer(actual) && isBuffer(expected)) {\n    return compare(actual, expected) === 0;\n\n  // 7.2. If the expected value is a Date object, the actual value is\n  // equivalent if it is also a Date object that refers to the same time.\n  } else if (util.isDate(actual) && util.isDate(expected)) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3 If the expected value is a RegExp object, the actual value is\n  // equivalent if it is also a RegExp object with the same source and\n  // properties (`global`, `multiline`, `lastIndex`, `ignoreCase`).\n  } else if (util.isRegExp(actual) && util.isRegExp(expected)) {\n    return actual.source === expected.source &&\n           actual.global === expected.global &&\n           actual.multiline === expected.multiline &&\n           actual.lastIndex === expected.lastIndex &&\n           actual.ignoreCase === expected.ignoreCase;\n\n  // 7.4. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if ((actual === null || typeof actual !== 'object') &&\n             (expected === null || typeof expected !== 'object')) {\n    return strict ? actual === expected : actual == expected;\n\n  // If both values are instances of typed arrays, wrap their underlying\n  // ArrayBuffers in a Buffer each to increase performance\n  // This optimization requires the arrays to have the same type as checked by\n  // Object.prototype.toString (aka pToString). Never perform binary\n  // comparisons for Float*Arrays, though, since e.g. +0 === -0 but their\n  // bit patterns are not identical.\n  } else if (isView(actual) && isView(expected) &&\n             pToString(actual) === pToString(expected) &&\n             !(actual instanceof Float32Array ||\n               actual instanceof Float64Array)) {\n    return compare(new Uint8Array(actual.buffer),\n                   new Uint8Array(expected.buffer)) === 0;\n\n  // 7.5 For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else if (isBuffer(actual) !== isBuffer(expected)) {\n    return false;\n  } else {\n    memos = memos || {actual: [], expected: []};\n\n    var actualIndex = memos.actual.indexOf(actual);\n    if (actualIndex !== -1) {\n      if (actualIndex === memos.expected.indexOf(expected)) {\n        return true;\n      }\n    }\n\n    memos.actual.push(actual);\n    memos.expected.push(expected);\n\n    return objEquiv(actual, expected, strict, memos);\n  }\n}\n\nfunction isArguments(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n}\n\nfunction objEquiv(a, b, strict, actualVisitedObjects) {\n  if (a === null || a === undefined || b === null || b === undefined)\n    return false;\n  // if one is a primitive, the other must be same\n  if (util.isPrimitive(a) || util.isPrimitive(b))\n    return a === b;\n  if (strict && Object.getPrototypeOf(a) !== Object.getPrototypeOf(b))\n    return false;\n  var aIsArgs = isArguments(a);\n  var bIsArgs = isArguments(b);\n  if ((aIsArgs && !bIsArgs) || (!aIsArgs && bIsArgs))\n    return false;\n  if (aIsArgs) {\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return _deepEqual(a, b, strict);\n  }\n  var ka = objectKeys(a);\n  var kb = objectKeys(b);\n  var key, i;\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length !== kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] !== kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!_deepEqual(a[key], b[key], strict, actualVisitedObjects))\n      return false;\n  }\n  return true;\n}\n\n// 8. The non-equivalence assertion tests for any deep inequality.\n// assert.notDeepEqual(actual, expected, message_opt);\n\nassert.notDeepEqual = function notDeepEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, false)) {\n    fail(actual, expected, message, 'notDeepEqual', assert.notDeepEqual);\n  }\n};\n\nassert.notDeepStrictEqual = notDeepStrictEqual;\nfunction notDeepStrictEqual(actual, expected, message) {\n  if (_deepEqual(actual, expected, true)) {\n    fail(actual, expected, message, 'notDeepStrictEqual', notDeepStrictEqual);\n  }\n}\n\n\n// 9. The strict equality assertion tests strict equality, as determined by ===.\n// assert.strictEqual(actual, expected, message_opt);\n\nassert.strictEqual = function strictEqual(actual, expected, message) {\n  if (actual !== expected) {\n    fail(actual, expected, message, '===', assert.strictEqual);\n  }\n};\n\n// 10. The strict non-equality assertion tests for strict inequality, as\n// determined by !==.  assert.notStrictEqual(actual, expected, message_opt);\n\nassert.notStrictEqual = function notStrictEqual(actual, expected, message) {\n  if (actual === expected) {\n    fail(actual, expected, message, '!==', assert.notStrictEqual);\n  }\n};\n\nfunction expectedException(actual, expected) {\n  if (!actual || !expected) {\n    return false;\n  }\n\n  if (Object.prototype.toString.call(expected) == '[object RegExp]') {\n    return expected.test(actual);\n  }\n\n  try {\n    if (actual instanceof expected) {\n      return true;\n    }\n  } catch (e) {\n    // Ignore.  The instanceof check doesn't work for arrow functions.\n  }\n\n  if (Error.isPrototypeOf(expected)) {\n    return false;\n  }\n\n  return expected.call({}, actual) === true;\n}\n\nfunction _tryBlock(block) {\n  var error;\n  try {\n    block();\n  } catch (e) {\n    error = e;\n  }\n  return error;\n}\n\nfunction _throws(shouldThrow, block, expected, message) {\n  var actual;\n\n  if (typeof block !== 'function') {\n    throw new TypeError('\"block\" argument must be a function');\n  }\n\n  if (typeof expected === 'string') {\n    message = expected;\n    expected = null;\n  }\n\n  actual = _tryBlock(block);\n\n  message = (expected && expected.name ? ' (' + expected.name + ').' : '.') +\n            (message ? ' ' + message : '.');\n\n  if (shouldThrow && !actual) {\n    fail(actual, expected, 'Missing expected exception' + message);\n  }\n\n  var userProvidedMessage = typeof message === 'string';\n  var isUnwantedException = !shouldThrow && util.isError(actual);\n  var isUnexpectedException = !shouldThrow && actual && !expected;\n\n  if ((isUnwantedException &&\n      userProvidedMessage &&\n      expectedException(actual, expected)) ||\n      isUnexpectedException) {\n    fail(actual, expected, 'Got unwanted exception' + message);\n  }\n\n  if ((shouldThrow && actual && expected &&\n      !expectedException(actual, expected)) || (!shouldThrow && actual)) {\n    throw actual;\n  }\n}\n\n// 11. Expected to throw an error:\n// assert.throws(block, Error_opt, message_opt);\n\nassert.throws = function(block, /*optional*/error, /*optional*/message) {\n  _throws(true, block, error, message);\n};\n\n// EXTENSION! This is annoying to write outside this module.\nassert.doesNotThrow = function(block, /*optional*/error, /*optional*/message) {\n  _throws(false, block, error, message);\n};\n\nassert.ifError = function(err) { if (err) throw err; };\n\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    if (hasOwn.call(obj, key)) keys.push(key);\n  }\n  return keys;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_assert@1.4.1@assert/assert.js\n// module id = 9\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_process@0.11.10@process/browser.js\n// module id = 10\n// module chunks = 0","import {Buffer} from 'Buffer'\r\n\r\nconst MAX_SIZE_COMMAND_LINE = 64;\r\nexport default class OBuf {\r\n\tconstructor(prefix, socket) {\r\n\r\n\t\tvar n = Math.max(Buffer.poolSize / 2, 4096);\r\n\t\tthis._buf = Buffer.alloc(n);\r\n\t\tthis._wrpos = MAX_SIZE_COMMAND_LINE;\r\n\t\t// this._endpos = n;\r\n\t\t// this._type = type;\r\n\t\t// this._Id = id;\r\n\t\tthis._chunkId = 0;\r\n\t\tthis._finish = false;\r\n\t\tthis._prefix = prefix; //':'+type + ' ' + id;\r\n\t\tthis._socket = socket;\r\n\t}\r\n\r\n\twrable_size() {\r\n\t\treturn this._buf.length > this._wrpos ? (this._buf.length - this._wrpos) : 0;\r\n\t}\r\n\r\n\tappend(data, encoding) {\r\n\t\tif (data === undefined && encoding === undefined) {\r\n\t\t\tthis._finish = true;\r\n\t\t\tthis.flush();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t// data = Buffer.from(data, encoding);\r\n\t\tif (typeof data === 'string') {\r\n\t\t\tvar n = Buffer.byteLength(data, encoding);\r\n\t\t\tif (n <= this.wrable_size()) {\r\n\t\t\t\tthis._wrpos += this._buf.write(data, this._wrpos, encoding);\r\n\t\t\t\tif (this.wrable_size() == 0) {\r\n\t\t\t\t\tthis.flush();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tif (this.wrable_size() == 0) {\r\n\t\t\t\t\tthis.flush();\r\n\t\t\t\t}\r\n\t\t\t\tif (n > this.wrable_size()) {\r\n\t\t\t\t\tthis.flush(Buffer(data, encoding)); //max block send directly\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// data = Buffer.from(data, encoding);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif (data.length <= this.wrable_size()) {\r\n\t\t\t\tdata.copy(this._buf, this._wrpos);\r\n\t\t\t\tthis._wrpos += data.length;\r\n\t\t\t} else {\r\n\t\t\t\t//slice\r\n\t\t\t\twhile (data.length > this.wrable_size()) {\r\n\t\t\t\t\tvar len = this.wrable_size();\r\n\t\t\t\t\tdata.copy(this._buf, this._wrpos, 0, len);\r\n\t\t\t\t\tthis._wrpos += len;\r\n\t\t\t\t\tdata = data.slice(len);\r\n\t\t\t\t\tthis.flush();\r\n\t\t\t\t}\r\n\t\t\t\tdata.copy(this._buf, this._wrpos);\r\n\t\t\t\tthis._wrpos += data.length;\r\n\t\t\t}\r\n\t\t }\r\n\t}\r\n\r\n\tflush(buf) {\r\n\t\tvar chunkid = '';\r\n\t\tif (!this._finish) {\r\n\t\t\tthis._chunkId++;\r\n\t\t}\r\n\r\n\t\tif (this._chunkId) {\r\n\t\t\tchunkid = ' ' + this._chunkId;\r\n\t\t}\r\n\t\tvar cline;\r\n\t\tif (!this._finish) {\r\n\t\t\tcline = this._prefix + chunkid + '\\r\\n';\r\n\t\t} else {\r\n\t\t\tcline = this._prefix + '\\r\\n';\r\n\t\t}\r\n\t\tif (buf) {\r\n\t\t\tvar b = Buffer.concat([Buffer(cline), buf]);\r\n\t\t\tthis._socket.send(b);\r\n\t\t\t// console.log('-------------')\r\n\t\t\t// console.log(b.toString());\r\n\t\t\t// console.log('-------------')\r\n\t\t} else {\r\n\t\t\tvar offset = MAX_SIZE_COMMAND_LINE - cline.length;\r\n\t\t\tthis._buf.write(cline, offset, 'ascii');\r\n\t\t\tthis._socket.send(this._buf.slice(offset, this._wrpos));\r\n\t\t\t// console.log('-------------')\r\n\t\t\t// console.log(this._buf.slice(offset, this._wrpos).toString());\r\n\t\t\t// console.log('-------------')\r\n\t\t\tthis._buf.fill(0);\r\n\t\t\tthis._wrpos = MAX_SIZE_COMMAND_LINE;\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/obuf.js","import EventEmitter from './EventEmitter'\r\nimport * as Common from './common'\r\nimport OBuf from './obuf'\r\nimport * as HttpWsError from './errors'\r\nimport {Buffer} from 'Buffer'\r\n\r\nconst checkIsHttpToken = Common._checkIsHttpToken;\r\nconst checkInvalidHeaderChar = Common._checkInvalidHeaderChar;\r\nconst outHeadersKey = Common.outHeadersKey;\r\nconst CRLF = Common.CRLF;\r\nconst debug = Common.debug;\r\nconst utcDate = Common.utcDate;\r\n\r\nvar RE_FIELDS =\r\n    /^(?:Connection|Transfer-Encoding|Content-Length|Date|Expect|Trailer|Upgrade)$/i;\r\nvar RE_CONN_VALUES = /(?:^|\\W)close|upgrade(?:$|\\W)/ig;\r\nvar RE_TE_CHUNKED = Common.chunkExpression;\r\n\r\n// isCookieField performs a case-insensitive comparison of a provided string\r\n// against the word \"cookie.\" This method (at least as of V8 5.4) is faster than\r\n// the equivalent case-insensitive regexp, even if isCookieField does not get\r\n// inlined.\r\nfunction isCookieField(s) {\r\n    if (s.length !== 6) return false;\r\n    var ch = s.charCodeAt(0);\r\n    if (ch !== 99 && ch !== 67) return false;\r\n    ch = s.charCodeAt(1);\r\n    if (ch !== 111 && ch !== 79) return false;\r\n    ch = s.charCodeAt(2);\r\n    if (ch !== 111 && ch !== 79) return false;\r\n    ch = s.charCodeAt(3);\r\n    if (ch !== 107 && ch !== 75) return false;\r\n    ch = s.charCodeAt(4);\r\n    if (ch !== 105 && ch !== 73) return false;\r\n    ch = s.charCodeAt(5);\r\n    if (ch !== 101 && ch !== 69) return false;\r\n    return true;\r\n}\r\n\r\nfunction noopPendingOutput(amount) {}\r\n\r\nconst MAX_SIZE_COMMAND_LINE =64;\r\n\r\nexport default class OutgoingMessage extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n        // Queue that holds all currently pending data, until the response will be\r\n        // assigned to the socket (until it will its turn in the HTTP pipeline).\r\n        this.output = [];\r\n        this.outputEncodings = [];\r\n        this.outputCallbacks = [];\r\n\r\n        // `outputSize` is an approximate measure of how much data is queued on this\r\n        // response. `_onPendingData` will be invoked to update similar global\r\n        // per-connection counter. That counter will be used to pause/unpause the\r\n        // TCP socket and HTTP Parser and thus handle the backpressure.\r\n        this.outputSize = 0;\r\n\r\n        this.writable = true;\r\n\r\n        this._last = false;\r\n        this.upgrading = false;\r\n        this.chunkedEncoding = false;\r\n        this.shouldKeepAlive = true;\r\n        this.useChunkedEncodingByDefault = true;\r\n        this.sendDate = false;\r\n        this._removedConnection = false;\r\n        this._removedContLen = false;\r\n        this._removedTE = false;\r\n\r\n        this._contentLength = null;\r\n        this._hasBody = true;\r\n        this._trailer = '';\r\n\r\n        this.finished = false;\r\n        this._headerSent = false;\r\n\r\n//  this.socket = null;\r\n//  this.connection = null;\r\n        this._header = null;\r\n        this[outHeadersKey] = null;\r\n\r\n        this._onPendingData = noopPendingOutput;\r\n\r\n        this._closed = false; //indicate the connection socket closed\r\n    }\r\n\r\n    _renderHeaders() {\r\n        if (this._header) {\r\n            throw new HttpWsError.Error('ERR_HTTP_HEADERS_SENT', 'render');\r\n        }\r\n\r\n        var headersMap = this[outHeadersKey];\r\n        if (!headersMap) return {};\r\n\r\n        var headers = {};\r\n        var keys = Object.keys(headersMap);\r\n\r\n        for (var i = 0, l = keys.length; i < l; i++) {\r\n            var key = keys[i];\r\n            headers[headersMap[key][0]] = headersMap[key][1];\r\n        }\r\n        return headers;\r\n    }\r\n\r\n    close() {\r\n        this._closed = true;\r\n        this.emit('close');\r\n    }\r\n\r\n    _send(data, encoding, callback) {\r\n        // This is a shameful hack to get the headers and first body chunk onto\r\n        // the same packet. Future versions of Node are going to take care of\r\n        // this at a lower level and in a more general way.\r\n        if (!this._headerSent) {\r\n            if (typeof data === 'string' &&\r\n                (encoding === 'utf8' || encoding === 'latin1' || !encoding)) {\r\n                data = this._header + data;\r\n            } else {\r\n                var header = this._header;\r\n                if (this.output.length === 0) {\r\n                    this.output = [header];\r\n                    this.outputEncodings = ['latin1'];\r\n                    this.outputCallbacks = [null];\r\n                } else {\r\n                    this.output.unshift(header);\r\n                    this.outputEncodings.unshift('latin1');\r\n                    this.outputCallbacks.unshift(null);\r\n                }\r\n                this.outputSize += header.length;\r\n                this._onPendingData(header.length);\r\n            }\r\n            this._headerSent = true;\r\n        }\r\n        return this._writeRaw(data, encoding, callback);\r\n    }\r\n\r\n    _writeRaw(data, encoding, callback) {\r\n        //const conn = this.connection;\r\n        //do nothing once socket closed\r\n        if ( this._closed /*conn && conn.destroyed*/) {\r\n            // The socket was destroyed. If we're still trying to write to it,\r\n            // then we haven't gotten the 'close' event yet.\r\n            return false;\r\n        }\r\n\r\n        if (typeof encoding === 'function') {\r\n            callback = encoding;\r\n            encoding = null;\r\n        }\r\n\r\n        //if (conn && conn._httpMessage === this && conn.writable && !conn.destroyed) {\r\n        if( ! this._closed ){\r\n            // There might be pending data in the this.output buffer.\r\n            if (this.output.length) {\r\n                this._flushOutput();\r\n            }\r\n            // else if (!data.length) {\r\n            //   if (typeof callback === 'function') {\r\n            //     nextTick(/*this.socket[async_id_symbol],*/ callback);\r\n            //   }\r\n            //   // return true;\r\n            // }\r\n            // Directly write to socket.\r\n            //return conn.write(data, encoding, callback);\r\n            this.emit('write',data, encoding, callback)\r\n            return true;\r\n        }\r\n        // Buffer, as long as we're not destroyed.\r\n        this.output.push(data);\r\n        this.outputEncodings.push(encoding);\r\n        this.outputCallbacks.push(callback);\r\n        this.outputSize += data.length;\r\n        this._onPendingData(data.length);\r\n        return false;\r\n    }\r\n\r\n    _storeHeader(firstLine, headers) {\r\n        // firstLine in the case of request is: 'GET /index.html HTTP/1.1\\r\\n'\r\n        // in the case of response it is: 'HTTP/1.1 200 OK\\r\\n'\r\n        var state = {\r\n            connection: false,\r\n            connUpgrade: false,\r\n            contLen: false,\r\n            te: false,\r\n            date: false,\r\n            expect: false,\r\n            trailer: false,\r\n            upgrade: false,\r\n            header: firstLine\r\n        };\r\n\r\n        var field;\r\n        var key;\r\n        var value;\r\n        var i;\r\n        var j;\r\n        if (headers === this[outHeadersKey]) {\r\n            for (key in headers) {\r\n                var entry = headers[key];\r\n                field = entry[0];\r\n                value = entry[1];\r\n\r\n                if (value instanceof Array) {\r\n                    if (value.length < 2 || !isCookieField(field)) {\r\n                        for (j = 0; j < value.length; j++)\r\n                            storeHeader(this, state, field, value[j], false);\r\n                        continue;\r\n                    }\r\n                    value = value.join('; ');\r\n                }\r\n                storeHeader(this, state, field, value, false);\r\n            }\r\n        } else if (headers instanceof Array) {\r\n            for (i = 0; i < headers.length; i++) {\r\n                field = headers[i][0];\r\n                value = headers[i][1];\r\n\r\n                if (value instanceof Array) {\r\n                    for (j = 0; j < value.length; j++) {\r\n                        storeHeader(this, state, field, value[j], true);\r\n                    }\r\n                } else {\r\n                    storeHeader(this, state, field, value, true);\r\n                }\r\n            }\r\n        } else if (headers) {\r\n            var keys = Object.keys(headers);\r\n            for (i = 0; i < keys.length; i++) {\r\n                field = keys[i];\r\n                value = headers[field];\r\n\r\n                if (value instanceof Array) {\r\n                    if (value.length < 2 || !isCookieField(field)) {\r\n                        for (j = 0; j < value.length; j++)\r\n                            storeHeader(this, state, field, value[j], true);\r\n                        continue;\r\n                    }\r\n                    value = value.join('; ');\r\n                }\r\n                storeHeader(this, state, field, value, true);\r\n            }\r\n        }\r\n\r\n        // Are we upgrading the connection?\r\n        if (state.connUpgrade && state.upgrade)\r\n            this.upgrading = true;\r\n\r\n        // Date header\r\n        if (this.sendDate && !state.date) {\r\n            state.header += 'Date: ' + utcDate() + CRLF;\r\n        }\r\n\r\n        // Force the connection to close when the response is a 204 No Content or\r\n        // a 304 Not Modified and the user has set a \"Transfer-Encoding: chunked\"\r\n        // header.\r\n        //\r\n        // RFC 2616 mandates that 204 and 304 responses MUST NOT have a body but\r\n        // node.js used to send out a zero chunk anyway to accommodate clients\r\n        // that don't have special handling for those responses.\r\n        //\r\n        // It was pointed out that this might confuse reverse proxies to the point\r\n        // of creating security liabilities, so suppress the zero chunk and force\r\n        // the connection to close.\r\n        var statusCode = this.statusCode;\r\n        if ((statusCode === 204 || statusCode === 304) && this.chunkedEncoding) {\r\n            debug(statusCode + ' response should not use chunked encoding,' +\r\n                ' closing connection.');\r\n            this.chunkedEncoding = false;\r\n            this.shouldKeepAlive = false;\r\n        }\r\n\r\n        // keep-alive logic\r\n        if (this._removedConnection) {\r\n            this._last = true;\r\n            this.shouldKeepAlive = false;\r\n        } else if (!state.connection) {\r\n            var shouldSendKeepAlive = this.shouldKeepAlive &&\r\n                (state.contLen || this.useChunkedEncodingByDefault || this.agent);\r\n            if (shouldSendKeepAlive) {\r\n                state.header += 'Connection: keep-alive\\r\\n';\r\n            } else {\r\n                this._last = true;\r\n                state.header += 'Connection: close\\r\\n';\r\n            }\r\n        }\r\n\r\n        if (!state.contLen && !state.te) {\r\n            if (!this._hasBody) {\r\n                // Make sure we don't end the 0\\r\\n\\r\\n at the end of the message.\r\n                this.chunkedEncoding = false;\r\n            } else if (!this.useChunkedEncodingByDefault) {\r\n                this._last = true;\r\n            } else {\r\n                if (!state.trailer &&\r\n                    !this._removedContLen &&\r\n                    typeof this._contentLength === 'number') {\r\n                    state.header += 'Content-Length: ' + this._contentLength + CRLF;\r\n                } else if (!this._removedTE) {\r\n                    state.header += 'Transfer-Encoding: chunked\\r\\n';\r\n                    this.chunkedEncoding = true;\r\n                } else {\r\n                    // We should only be able to get here if both Content-Length and\r\n                    // Transfer-Encoding are removed by the user.\r\n                    // See: test/parallel/test-http-remove-header-stays-removed.js\r\n                    debug('Both Content-Length and Transfer-Encoding are removed');\r\n                }\r\n            }\r\n        }\r\n\r\n        // Test non-chunked message does not have trailer header set,\r\n        // message will be terminated by the first empty line after the\r\n        // header fields, regardless of the header fields present in the\r\n        // message, and thus cannot contain a message body or 'trailers'.\r\n        if (this.chunkedEncoding !== true && state.trailer) {\r\n            throw new HttpWsError.Error('ERR_HTTP_TRAILER_INVALID');\r\n        }\r\n\r\n        this._header = state.header + CRLF;\r\n        this._headerSent = false;\r\n\r\n        // wait until the first body chunk, or close(), is sent to flush,\r\n        // UNLESS we're sending Expect: 100-continue.\r\n        if (state.expect) this._send('');\r\n    }\r\n\r\n    setHeader(name, value) {\r\n        validateHeader(this, name, value);\r\n\r\n        if (!this[outHeadersKey])\r\n            this[outHeadersKey] = {};\r\n\r\n        const key = name.toLowerCase();\r\n        this[outHeadersKey][key] = [name, value];\r\n\r\n        switch (key.length) {\r\n            case 10:\r\n                if (key === 'connection')\r\n                    this._removedConnection = false;\r\n                break;\r\n            case 14:\r\n                if (key === 'content-length')\r\n                    this._removedContLen = false;\r\n                break;\r\n            case 17:\r\n                if (key === 'transfer-encoding')\r\n                    this._removedTE = false;\r\n                break;\r\n        }\r\n    }\r\n\r\n    getHeader(name) {\r\n        if (typeof name !== 'string') {\r\n            throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', 'name', 'string');\r\n        }\r\n\r\n        if (!this[outHeadersKey]) return;\r\n\r\n        var entry = this[outHeadersKey][name.toLowerCase()];\r\n        if (!entry)\r\n            return;\r\n        return entry[1];\r\n    }\r\n\r\n    getHeaderNames() {\r\n        return (this[outHeadersKey] ? Object.keys(this[outHeadersKey]) : []);\r\n    }\r\n\r\n    getHeaders() {\r\n        const headers = this[outHeadersKey];\r\n        const ret = Object.create(null);\r\n        if (headers) {\r\n            const keys = Object.keys(headers);\r\n            for (let i = 0; i < keys.length; ++i) {\r\n                const key = keys[i];\r\n                const val = headers[key][1];\r\n                ret[key] = val;\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n\r\n    hasHeader(name) {\r\n        if (typeof name !== 'string') {\r\n            throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', 'name', 'string');\r\n        }\r\n\r\n        return !!(this[outHeadersKey] && this[outHeadersKey][name.toLowerCase()]);\r\n    }\r\n\r\n    removeHeader(name) {\r\n        if (typeof name !== 'string') {\r\n            throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', 'name', 'string');\r\n        }\r\n\r\n        if (this._header) {\r\n            throw new HttpWsError.Error('ERR_HTTP_HEADERS_SENT', 'remove');\r\n        }\r\n\r\n        let key = name.toLowerCase();\r\n\r\n        switch (key.length) {\r\n            case 10:\r\n                if (key === 'connection')\r\n                    this._removedConnection = true;\r\n                break;\r\n            case 14:\r\n                if (key === 'content-length')\r\n                    this._removedContLen = true;\r\n                break;\r\n            case 17:\r\n                if (key === 'transfer-encoding')\r\n                    this._removedTE = true;\r\n                break;\r\n            case 4:\r\n                if (key === 'date')\r\n                    this.sendDate = false;\r\n                break;\r\n        }\r\n\r\n        if (this[outHeadersKey]) {\r\n            delete this[outHeadersKey][key];\r\n        }\r\n    }\r\n\r\n    _implicitHeader() {\r\n        throw new HttpWsError.Error('ERR_METHOD_NOT_IMPLEMENTED', '_implicitHeader()');\r\n    }\r\n\r\n    write(chunk, encoding, callback) {\r\n        return write_(this, chunk, encoding, callback, false);\r\n    }\r\n\r\n    addTrailers(headers) {\r\n        this._trailer = '';\r\n        var keys = Object.keys(headers);\r\n        var isArray = Array.isArray(headers);\r\n        var field, value;\r\n        for (var i = 0, l = keys.length; i < l; i++) {\r\n            var key = keys[i];\r\n            if (isArray) {\r\n                field = headers[key][0];\r\n                value = headers[key][1];\r\n            } else {\r\n                field = key;\r\n                value = headers[key];\r\n            }\r\n            if (typeof field !== 'string' || !field || !checkIsHttpToken(field)) {\r\n                throw new HttpWsError.TypeError('ERR_INVALID_HTTP_TOKEN', 'Trailer name',\r\n                    field);\r\n            }\r\n            if (checkInvalidHeaderChar(value)) {\r\n                debug('Trailer \"%s\" contains invalid characters', field);\r\n                throw new HttpWsError.TypeError('ERR_INVALID_CHAR', 'trailer content', field);\r\n            }\r\n            this._trailer += field + ': ' + escapeHeaderValue(value) + CRLF;\r\n        }\r\n    }\r\n\r\n    end(chunk, encoding, callback) {\r\n        if (typeof chunk === 'function') {\r\n            callback = chunk;\r\n            chunk = null;\r\n        } else if (typeof encoding === 'function') {\r\n            callback = encoding;\r\n            encoding = null;\r\n        }\r\n\r\n        if (this.finished) {\r\n            return false;\r\n        }\r\n\r\n//  var uncork;\r\n        if (chunk) {\r\n            if (typeof chunk !== 'string' && !(chunk instanceof Buffer)) {\r\n                throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', 'first argument',\r\n                    ['string', 'buffer']);\r\n            }\r\n            if (!this._header) {\r\n                if (typeof chunk === 'string')\r\n                    this._contentLength = Buffer.byteLength(chunk, encoding);\r\n                else\r\n                    this._contentLength = chunk.length;\r\n            }\r\n//    if (this.connection) {\r\n//      this.connection.cork();\r\n//      uncork = true;\r\n//    }\r\n            write_(this, chunk, encoding, null, true);\r\n        } else if (!this._header) {\r\n            this._contentLength = 0;\r\n            this._implicitHeader();\r\n        }\r\n\r\n        if (typeof callback === 'function')\r\n            this.once('finish', callback);\r\n\r\n        var finish = onFinish.bind(undefined, this);\r\n\r\n        var ret;\r\n        /*\r\n          if (this._hasBody && this.chunkedEncoding) {\r\n            ret = this._send('0\\r\\n' + this._trailer + '\\r\\n', 'latin1', finish);\r\n          } else {\r\n            // Force a flush, HACK.\r\n            ret = this._send('', 'latin1', finish);\r\n          }\r\n        */\r\n        ret = this._send();\r\n//  if (uncork)\r\n//    this.connection.uncork();\r\n\r\n        this.finished = true;\r\n        this.writable = false;\r\n\r\n        // There is the first message on the outgoing queue, and we've sent\r\n        // everything to the socket.\r\n        debug('outgoing message end.');\r\n//  if (this.output.length === 0 &&\r\n//      this.connection &&\r\n//      this.connection._httpMessage === this) {\r\n//    this._finish();\r\n//  }\r\n        this.close();\r\n        return ret;\r\n    }\r\n\r\n    _finish() {\r\n        //assert(this.connection);\r\n        this.emit('prefinish');\r\n    }\r\n\r\n    _flushOutput(socket) {\r\n        var ret;\r\n        var outputLength = this.output.length;\r\n        if (outputLength <= 0)\r\n            return ret;\r\n\r\n        var output = this.output;\r\n        var outputEncodings = this.outputEncodings;\r\n        var outputCallbacks = this.outputCallbacks;\r\n        //socket.cork();\r\n        for (var i = 0; i < outputLength; i++) {\r\n            //ret = socket.write(output[i], outputEncodings[i], outputCallbacks[i]);\r\n            ret = this.emit('flush',output[i], outputEncodings[i], outputCallbacks[i]);\r\n        }\r\n        //socket.uncork();\r\n\r\n        this.output = [];\r\n        this.outputEncodings = [];\r\n        this.outputCallbacks = [];\r\n        this._onPendingData(-this.outputSize);\r\n        this.outputSize = 0;\r\n\r\n        return ret;\r\n    }\r\n\r\n    flushHeaders() {\r\n        if (!this._header) {\r\n            this._implicitHeader();\r\n        }\r\n\r\n        // Force-flush the headers.\r\n        this._send('');\r\n    }\r\n\r\n    _flushOut(data,encoding){\r\n        if (this._obuf == null) {\r\n            var prefix;\r\n            if (this._type = HTTPParser.REQUEST) {\r\n                prefix = ':response ';\r\n            } else {\r\n                prefix = ':request ';\r\n            }\r\n            this._obuf = new OBuf(prefix + this.Id, this.connection.socket);\r\n        }\r\n\r\n        this._obuf.append(data, encoding);\r\n        return;\r\n    }\r\n    get headersSent() {\r\n        return !!this._header;\r\n    }\r\n\r\n    get _headers() {\r\n        return this.getHeaders();\r\n    }\r\n\r\n    set _headers(val) {\r\n        if (val === null) {\r\n            this[outHeadersKey] = null;\r\n        } else if (typeof val === 'object') {\r\n            const headers = this[outHeadersKey] = {};\r\n            const keys = Object.keys(val);\r\n            let length = keys.length;\r\n            for (let i = 0; i < length; ++i) {\r\n                const name = keys[i];\r\n                headers[name.toLowerCase()] = [name, val[name]];\r\n            }\r\n        }\r\n    }\r\n\r\n    get _headerNames() {\r\n        const headers = this[outHeadersKey];\r\n        if (headers) {\r\n            const out = Object.create(null);\r\n            const keys = Object.keys(headers);\r\n            let length = keys.length;\r\n            for (let i = 0; i < length; ++i) {\r\n                const key = keys[i];\r\n                const val = headers[key][0];\r\n                out[key] = val;\r\n            }\r\n            return out;\r\n        } else {\r\n            return headers;\r\n        }\r\n    }\r\n\r\n    set _headerNames(val) {\r\n        if (typeof val === 'object' && val !== null) {\r\n            const headers = this[outHeadersKey];\r\n            if (!headers)\r\n                return;\r\n            const keys = Object.keys(val);\r\n            let length = keys.length;\r\n            for (let i = 0; i < length; ++i) {\r\n                const header = headers[keys[i]];\r\n                if (header)\r\n                    header[0] = val[keys[i]];\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nfunction onFinish(outmsg) {\r\n    outmsg.emit('finish');\r\n}\r\n\r\nfunction escapeHeaderValue(value) {\r\n    // Protect against response splitting. The regex test is there to\r\n    // minimize the performance impact in the common case.\r\n    return /[\\r\\n]/.test(value) ? value.replace(/[\\r\\n]+[ \\t]*/g, '') : value;\r\n}\r\n\r\nfunction storeHeader(self, state, key, value, validate) {\r\n    if (validate) {\r\n        if (typeof key !== 'string' || !key || !checkIsHttpToken(key)) {\r\n            throw new HttpWsError.TypeError(\r\n                'ERR_INVALID_HTTP_TOKEN', 'Header name', key);\r\n        }\r\n        if (value === undefined) {\r\n            throw new HttpWsError.TypeError('ERR_MISSING_ARGS', `header \"${key}\"`);\r\n        } else if (checkInvalidHeaderChar(value)) {\r\n            debug('Header \"%s\" contains invalid characters', key);\r\n            throw new HttpWsError.TypeError('ERR_INVALID_CHAR', 'header content', key);\r\n        }\r\n    }\r\n    state.header += key + ': ' + escapeHeaderValue(value) + CRLF;\r\n    matchHeader(self, state, key, value);\r\n}\r\n\r\nfunction matchConnValue(self, state, value) {\r\n    var sawClose = false;\r\n    var m = RE_CONN_VALUES.exec(value);\r\n    while (m) {\r\n        if (m[0].length === 5)\r\n            sawClose = true;\r\n        else\r\n            state.connUpgrade = true;\r\n        m = RE_CONN_VALUES.exec(value);\r\n    }\r\n    if (sawClose)\r\n        self._last = true;\r\n    else\r\n        self.shouldKeepAlive = true;\r\n}\r\n\r\nfunction matchHeader(self, state, field, value) {\r\n    var m = RE_FIELDS.exec(field);\r\n    if (!m)\r\n        return;\r\n    var len = m[0].length;\r\n    if (len === 10) {\r\n        state.connection = true;\r\n        matchConnValue(self, state, value);\r\n    } else if (len === 17) {\r\n        state.te = true;\r\n        if (RE_TE_CHUNKED.test(value)) self.chunkedEncoding = true;\r\n    } else if (len === 14) {\r\n        state.contLen = true;\r\n    } else if (len === 4) {\r\n        state.date = true;\r\n    } else if (len === 6) {\r\n        state.expect = true;\r\n    } else if (len === 7) {\r\n        var ch = m[0].charCodeAt(0);\r\n        if (ch === 85 || ch === 117)\r\n            state.upgrade = true;\r\n        else\r\n            state.trailer = true;\r\n    }\r\n}\r\n\r\nfunction validateHeader(msg, name, value) {\r\n    if (typeof name !== 'string' || !name || !checkIsHttpToken(name))\r\n        throw new HttpWsError.TypeError('ERR_INVALID_HTTP_TOKEN', 'Header name', name);\r\n    if (value === undefined)\r\n        throw new HttpWsError.TypeError('ERR_MISSING_ARGS', 'value');\r\n    if (msg._header)\r\n        throw new HttpWsError.Error('ERR_HTTP_HEADERS_SENT', 'set');\r\n    if (checkInvalidHeaderChar(value)) {\r\n        debug('Header \"%s\" contains invalid characters', name);\r\n        throw new HttpWsError.TypeError('ERR_INVALID_CHAR', 'header content', name);\r\n    }\r\n}\r\n\r\nfunction write_(msg, chunk, encoding, callback, fromEnd) {\r\n    if (msg.finished) {\r\n//    var err = new Error('write after end');\r\n//    nextTick(msg.socket && msg.socket[async_id_symbol],\r\n//             writeAfterEndNT.bind(msg),\r\n//             err,\r\n//             callback);//\r\n\r\n        return true;\r\n    }\r\n\r\n    if (!msg._header) {\r\n        msg._implicitHeader();\r\n    }\r\n\r\n    if (!msg._hasBody) {\r\n        debug('This type of response MUST NOT have a body. ' +\r\n            'Ignoring write() calls.');\r\n        return true;\r\n    }\r\n\r\n    if (!fromEnd && typeof chunk !== 'string' && !(chunk instanceof Buffer)) {\r\n        throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', 'first argument',\r\n            ['string', 'buffer']);\r\n    }\r\n\r\n\r\n    // If we get an empty string or buffer, then just do nothing, and\r\n    // signal the user to keep writing.\r\n    if (chunk.length === 0) return true;\r\n\r\n//  if (!fromEnd && msg.connection && !msg.connection.corked) {\r\n//    msg.connection.cork();\r\n//    process.nextTick(connectionCorkNT, msg.connection);\r\n//  }\r\n\r\n    var len, ret;\r\n    /*\r\n      if (msg.chunkedEncoding) {\r\n        if (typeof chunk === 'string')\r\n          len = Buffer.byteLength(chunk, encoding);\r\n        else\r\n          len = chunk.length;\r\n\r\n        msg._send(len.toString(16), 'latin1', null);\r\n        msg._send(crlf_buf, null, null);\r\n        msg._send(chunk, encoding, null);\r\n        ret = msg._send(crlf_buf, null, callback);\r\n      } else {\r\n        ret = msg._send(chunk, encoding, callback);\r\n      }\r\n    */\r\n    ret = msg._send(chunk, encoding, callback);\r\n\r\n    debug('write ret = ' + ret);\r\n    return ret;\r\n}\r\n\r\n\r\nfunction writeAfterEndNT(err, callback) {\r\n    this.emit('error', err);\r\n    if (callback) callback(err);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/http_outgoing.js","import * as conn from './connection'\r\nimport Client from './client'\r\nimport { Buffer } from 'Buffer'\r\nimport EventEmitter from './EventEmitter'\r\n\r\nclass Server {\r\n    constructor(requestListener) {\r\n        this._requestListener = requestListener;\r\n    }\r\n    connect(url) {\r\n        var server = new Client(this._requestListener);\r\n        server.connect(url);\r\n        return server;\r\n    }\r\n}\r\n\r\nfunction createServer(requestListener) {\r\n    return new Server(requestListener);\r\n}\r\n\r\nfunction request(options, cb, arg) {\r\n    return conn.request(options, cb, arg);\r\n}\r\n\r\nlet httpws = {\r\n    request,\r\n    createServer,\r\n    Buffer,\r\n    EventEmitter\r\n};\r\n\r\nexport default httpws\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/http_ws.js","import Command from './command'\r\nimport ServerResponse from './service_response'\r\nimport {HTTPParser} from './http-parser'\r\n\r\nconst continueExpression =  /(?:^|\\W)100-continue(?:$|\\W)/i;\r\n\r\nexport default class ServiceCommand extends Command {\r\n    constructor(connection, id){\r\n        super(connection, id, HTTPParser.REQUEST);\r\n        let n = this.app.maxHeadersCount;\r\n        // Propagate headers limit from server instance to parser\r\n        if ( n && typeof n === 'number') {\r\n            this._parser.maxHeaderPairs = n << 1;\r\n        } else {\r\n            // Set default value because parser may be reused from FreeList\r\n            this._parser.maxHeaderPairs = 2000;\r\n        }\r\n        this._id = id;\r\n        var self = this;\r\n        this._timeout_handler = setTimeout(function () {\r\n            self.emit('timeout_notify');\r\n        }, 2 * 60 * 1000);\r\n    }\r\n\r\n    // The following callback is issued after the headers have been read on a\r\n    // new message. In this callback we setup the response object and pass it\r\n    // to the user.\r\n    _parserOnIncoming( req, keepAlive) {\r\n\r\n\r\n        let res = new ServerResponse(this, req);\r\n        let conn = this.connection;\r\n        let cmd  = this;\r\n        let id = this._id;\r\n\r\n        res.on('close',function(){\r\n            clearTimeout(cmd._timeout_handler);\r\n            cmd.emit('finish', id);\r\n        });\r\n\r\n        res.on('write',function( data, encoding, callback){\r\n            cmd.write( data , encoding );\r\n            if(callback){\r\n                callback();\r\n            }\r\n        });\r\n\r\n        //res._onPendingData = updateOutgoingData.bind(undefined, socket, state);\r\n\r\n        //res.shouldKeepAlive = keepAlive;\r\n\r\n        // When we're finished writing the response, check if this is the last\r\n        // response, if so destroy the socket.\r\n        //res.on('finish',\r\n        //    resOnFinish.bind(undefined, req, res, socket, state, server));\r\n\r\n        if (req.headers.expect !== undefined &&\r\n            (req.httpVersionMajor === 1 && req.httpVersionMinor === 1)) {\r\n            if (continueExpression.test(req.headers.expect)) {\r\n                res._expect_continue = true;\r\n                let app = this.app;\r\n\r\n                if (app.listenerCount('checkContinue') > 0) {\r\n                    app.emit('checkContinue', req, res);\r\n                } else {\r\n                    res.writeContinue();\r\n                    app.emit('request', req, res);\r\n                }\r\n            } else {\r\n                if (app.listenerCount('checkExpectation') > 0) {\r\n                    app.emit('checkExpectation', req, res);\r\n                } else {\r\n                    res.writeHead(417);\r\n                    res.end();\r\n                }\r\n            }\r\n        } else {\r\n            this.app.emit('request', req, res);\r\n        }\r\n        return false; // Not a HEAD response. (Not even a response!)\r\n    }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/service_command.js","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_util@0.10.3@util/support/isBufferBrowser.js\n// module id = 15\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_inherits@2.0.3@inherits/inherits_browser.js\n// module id = 16\n// module chunks = 0","import EventEmitter from './EventEmitter';\r\n\r\n\r\nexport default class IncomingMessage extends EventEmitter {\r\n    constructor() {\r\n        super();\r\n\r\n        this.httpVersionMajor = null;\r\n        this.httpVersionMinor = null;\r\n        this.httpVersion = null;\r\n        this.complete = false;\r\n        this.headers = {};\r\n        this.rawHeaders = [];\r\n        this.trailers = {};\r\n        this.rawTrailers = [];\r\n\r\n        this.readable = true;\r\n\r\n        this.upgrade = null;\r\n\r\n        // request (server) only\r\n        this.url = '';\r\n        this.method = null;\r\n\r\n        // response (client) only\r\n        this.statusCode = null;\r\n        this.statusMessage = null;\r\n        //this.client = socket;\r\n\r\n        // flag for backwards compatibility grossness.\r\n        this._consuming = false;\r\n\r\n        // flag for when we decide that this message cannot possibly be\r\n        // read by the user, so there's no point continuing to handle it.\r\n        this._dumped = false;\r\n\r\n        this.push = function(data){\r\n            if( data === null ){\r\n                this.emit('end');\r\n            } else {\r\n                this.emit('data',data);\r\n            }\r\n        }\r\n    }\r\n\r\n    _addHeaderLines(headers, n) {\r\n        if (headers && headers.length) {\r\n            let dest;\r\n            if (this.complete) {\r\n                this.rawTrailers = headers;\r\n                dest = this.trailers;\r\n            } else {\r\n                this.rawHeaders = headers;\r\n                dest = this.headers;\r\n            }\r\n\r\n            for (let i = 0; i < n; i += 2) {\r\n                this._addHeaderLine(headers[i], headers[i + 1], dest);\r\n            }\r\n        }\r\n    }\r\n\r\n    _addHeaderLine(field, value, dest) {\r\n        field = matchKnownFields(field);\r\n        let flag = field.charCodeAt(0);\r\n        if (flag === 0 || flag === 2) {\r\n            field = field.slice(1);\r\n            // Make a delimited list\r\n            if (typeof dest[field] === 'string') {\r\n                dest[field] += (flag === 0 ? ', ' : '; ') + value;\r\n            } else {\r\n                dest[field] = value;\r\n            }\r\n        } else if (flag === 1) {\r\n            // Array header -- only Set-Cookie at the moment\r\n            if (dest['set-cookie'] !== undefined) {\r\n                dest['set-cookie'].push(value);\r\n            } else {\r\n                dest['set-cookie'] = [value];\r\n            }\r\n        } else {\r\n            // Drop duplicates\r\n            if (dest[field] === undefined)\r\n                dest[field] = value;\r\n        }\r\n    }\r\n}\r\n\r\nfunction matchKnownFields(field) {\r\n    let low = false;\r\n    while (true) {\r\n        switch (field) {\r\n            case 'Content-Type':\r\n            case 'content-type':\r\n                return 'content-type';\r\n            case 'Content-Length':\r\n            case 'content-length':\r\n                return 'content-length';\r\n            case 'User-Agent':\r\n            case 'user-agent':\r\n                return 'user-agent';\r\n            case 'Referer':\r\n            case 'referer':\r\n                return 'referer';\r\n            case 'Host':\r\n            case 'host':\r\n                return 'host';\r\n            case 'Authorization':\r\n            case 'authorization':\r\n                return 'authorization';\r\n            case 'Proxy-Authorization':\r\n            case 'proxy-authorization':\r\n                return 'proxy-authorization';\r\n            case 'If-Modified-Since':\r\n            case 'if-modified-since':\r\n                return 'if-modified-since';\r\n            case 'If-Unmodified-Since':\r\n            case 'if-unmodified-since':\r\n                return 'if-unmodified-since';\r\n            case 'From':\r\n            case 'from':\r\n                return 'from';\r\n            case 'Location':\r\n            case 'location':\r\n                return 'location';\r\n            case 'Max-Forwards':\r\n            case 'max-forwards':\r\n                return 'max-forwards';\r\n            case 'Retry-After':\r\n            case 'retry-after':\r\n                return 'retry-after';\r\n            case 'ETag':\r\n            case 'etag':\r\n                return 'etag';\r\n            case 'Last-Modified':\r\n            case 'last-modified':\r\n                return 'last-modified';\r\n            case 'Server':\r\n            case 'server':\r\n                return 'server';\r\n            case 'Age':\r\n            case 'age':\r\n                return 'age';\r\n            case 'Expires':\r\n            case 'expires':\r\n                return 'expires';\r\n            case 'Set-Cookie':\r\n            case 'set-cookie':\r\n                return '\\u0001';\r\n            case 'Cookie':\r\n            case 'cookie':\r\n                return '\\u0002cookie';\r\n            // The fields below are not used in _addHeaderLine(), but they are common\r\n            // headers where we can avoid toLowerCase() if the mixed or lower case\r\n            // versions match the first time through.\r\n            case 'Transfer-Encoding':\r\n            case 'transfer-encoding':\r\n                return '\\u0000transfer-encoding';\r\n            case 'Date':\r\n            case 'date':\r\n                return '\\u0000date';\r\n            case 'Connection':\r\n            case 'connection':\r\n                return '\\u0000connection';\r\n            case 'Cache-Control':\r\n            case 'cache-control':\r\n                return '\\u0000cache-control';\r\n            case 'Vary':\r\n            case 'vary':\r\n                return '\\u0000vary';\r\n            case 'Content-Encoding':\r\n            case 'content-encoding':\r\n                return '\\u0000content-encoding';\r\n            case 'Origin':\r\n            case 'origin':\r\n                return '\\u0000origin';\r\n            case 'Upgrade':\r\n            case 'upgrade':\r\n                return '\\u0000upgrade';\r\n            case 'Expect':\r\n            case 'expect':\r\n                return '\\u0000expect';\r\n            case 'If-Match':\r\n            case 'if-match':\r\n                return '\\u0000if-match';\r\n            case 'If-None-Match':\r\n            case 'if-none-match':\r\n                return '\\u0000if-none-match';\r\n            case 'Accept':\r\n            case 'accept':\r\n                return '\\u0000accept';\r\n            case 'Accept-Encoding':\r\n            case 'accept-encoding':\r\n                return '\\u0000accept-encoding';\r\n            case 'Accept-Language':\r\n            case 'accept-language':\r\n                return '\\u0000accept-language';\r\n            case 'X-Forwarded-For':\r\n            case 'x-forwarded-for':\r\n                return '\\u0000x-forwarded-for';\r\n            case 'X-Forwarded-Host':\r\n            case 'x-forwarded-host':\r\n                return '\\u0000x-forwarded-host';\r\n            case 'X-Forwarded-Proto':\r\n            case 'x-forwarded-proto':\r\n                return '\\u0000x-forwarded-proto';\r\n            default:\r\n                if (low)\r\n                    return '\\u0000' + field;\r\n                field = field.toLowerCase();\r\n                low = true;\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/http_incoming.js","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction placeHoldersCount (b64) {\n  var len = b64.length\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // the number of equal signs (place holders)\n  // if there are two placeholders, than the two characters before it\n  // represent one byte\n  // if there is only one, then the three characters before it represent 2 bytes\n  // this is just a cheap hack to not do indexOf twice\n  return b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n}\n\nfunction byteLength (b64) {\n  // base64 is 4/3 + up to two characters of the original data\n  return (b64.length * 3 / 4) - placeHoldersCount(b64)\n}\n\nfunction toByteArray (b64) {\n  var i, l, tmp, placeHolders, arr\n  var len = b64.length\n  placeHolders = placeHoldersCount(b64)\n\n  arr = new Arr((len * 3 / 4) - placeHolders)\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  l = placeHolders > 0 ? len - 4 : len\n\n  var L = 0\n\n  for (i = 0; i < l; i += 4) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 18) | (revLookup[b64.charCodeAt(i + 1)] << 12) | (revLookup[b64.charCodeAt(i + 2)] << 6) | revLookup[b64.charCodeAt(i + 3)]\n    arr[L++] = (tmp >> 16) & 0xFF\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  if (placeHolders === 2) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 2) | (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[L++] = tmp & 0xFF\n  } else if (placeHolders === 1) {\n    tmp = (revLookup[b64.charCodeAt(i)] << 10) | (revLookup[b64.charCodeAt(i + 1)] << 4) | (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[L++] = (tmp >> 8) & 0xFF\n    arr[L++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] + lookup[num >> 12 & 0x3F] + lookup[num >> 6 & 0x3F] + lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + (uint8[i + 2])\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var output = ''\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    output += lookup[tmp >> 2]\n    output += lookup[(tmp << 4) & 0x3F]\n    output += '=='\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + (uint8[len - 1])\n    output += lookup[tmp >> 10]\n    output += lookup[(tmp >> 4) & 0x3F]\n    output += lookup[(tmp << 2) & 0x3F]\n    output += '='\n  }\n\n  parts.push(output)\n\n  return parts.join('')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_base64-js@1.2.1@base64-js/index.js\n// module id = 18\n// module chunks = 0","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_ieee754@1.1.8@ieee754/index.js\n// module id = 19\n// module chunks = 0","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_isarray@1.0.0@isarray/index.js\n// module id = 20\n// module chunks = 0","import {HTTPParser, HttpMethods} from './http-parser'\r\nimport OutgoingMessage from './http_outgoing'\r\nimport * as HttpWsError from './errors'\r\nimport * as Common from './common'\r\n\r\nconst debug = Common.debug;\r\nconst CRLF = Common.CRLF;\r\nconst continueExpression = Common.continueExpression;\r\nconst chunkExpression = Common.chunkExpression;\r\nconst httpSocketSetup = Common.httpSocketSetup;\r\nconst STATUS_CODES =Common.STATUS_CODES;\r\nconst outHeadersKey = Common.outHeadersKey;\r\n\r\nconst kOnExecute = HTTPParser.kOnExecute | 0;\r\n\r\nexport default class ServerResponse extends OutgoingMessage{\r\n    constructor(command,req) {\r\n        super();\r\n        this.command = command;\r\n\r\n        if (!req) return;\r\n        if (req.method === 'HEAD') this._hasBody = false;\r\n\r\n        this.sendDate = true;\r\n        this._sent100 = false;\r\n        this._expect_continue = false;\r\n        this.code = 200;\r\n        this.message = undefined;\r\n\r\n        if (req.httpVersionMajor < 1 || req.httpVersionMinor < 1) {\r\n            this.useChunkedEncodingByDefault = chunkExpression.test(req.headers.te);\r\n            this.shouldKeepAlive = false;\r\n        }\r\n    }\r\n\r\n    get statusCode() {\r\n        return this.code;\r\n    }\r\n\r\n    set statusCode(val) {\r\n        this.code = val;\r\n    }\r\n\r\n    get statusMessage() {\r\n        return this.message;\r\n    }\r\n\r\n    set statusMessage(val) {\r\n        this.message = val;\r\n    }\r\n\r\n    writeContinue(cb) {\r\n        this._writeRaw('HTTP/1.1 100 Continue' + CRLF + CRLF, 'ascii', cb);\r\n        this._sent100 = true;\r\n    }\r\n\r\n    _implicitHeader() {\r\n        this.writeHead(this.statusCode);\r\n    }\r\n\r\n    writeHead(statusCode, reason, obj) {\r\n        var originalStatusCode = statusCode;\r\n\r\n        statusCode |= 0;\r\n        if (statusCode < 100 || statusCode > 999) {\r\n            throw new HttpWsError.RangeError('ERR_HTTP_INVALID_STATUS_CODE',\r\n                originalStatusCode);\r\n        }\r\n\r\n\r\n        if (typeof reason === 'string') {\r\n            // writeHead(statusCode, reasonPhrase[, headers])\r\n            this.statusMessage = reason;\r\n        } else {\r\n            // writeHead(statusCode[, headers])\r\n            if (!this.statusMessage)\r\n                this.statusMessage = STATUS_CODES[statusCode] || 'unknown';\r\n            obj = reason;\r\n        }\r\n        this.statusCode = statusCode;\r\n\r\n        var headers;\r\n        if (this[outHeadersKey]) {\r\n            // Slow-case: when progressive API and header fields are passed.\r\n            var k;\r\n            if (obj) {\r\n                var keys = Object.keys(obj);\r\n                for (var i = 0; i < keys.length; i++) {\r\n                    k = keys[i];\r\n                    if (k) this.setHeader(k, obj[k]);\r\n                }\r\n            }\r\n            if (k === undefined && this._header) {\r\n                throw new HttpWsError.Error('ERR_HTTP_HEADERS_SENT', 'render');\r\n            }\r\n            // only progressive api is used\r\n            headers = this[outHeadersKey];\r\n        } else {\r\n            // only writeHead() called\r\n            headers = obj;\r\n        }\r\n\r\n        if (common._checkInvalidHeaderChar(this.statusMessage))\r\n            throw new HttpWsError.Error('ERR_INVALID_CHAR', 'statusMessage');\r\n\r\n        var statusLine = 'HTTP/1.1 ' + statusCode + ' ' + this.statusMessage + CRLF;\r\n\r\n        if (statusCode === 204 || statusCode === 304 ||\r\n            (statusCode >= 100 && statusCode <= 199)) {\r\n            // RFC 2616, 10.2.5:\r\n            // The 204 response MUST NOT include a message-body, and thus is always\r\n            // terminated by the first empty line after the header fields.\r\n            // RFC 2616, 10.3.5:\r\n            // The 304 response MUST NOT contain a message-body, and thus is always\r\n            // terminated by the first empty line after the header fields.\r\n            // RFC 2616, 10.1 Informational 1xx:\r\n            // This class of status code indicates a provisional response,\r\n            // consisting only of the Status-Line and optional headers, and is\r\n            // terminated by an empty line.\r\n            this._hasBody = false;\r\n        }\r\n\r\n        // don't keep alive connections where the client expects 100 Continue\r\n        // but we sent a final status; they may put extra bytes on the wire.\r\n        if (this._expect_continue && !this._sent100) {\r\n            this.shouldKeepAlive = false;\r\n        }\r\n\r\n        this._storeHeader(statusLine, headers);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/service_response.js","var apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(window, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\nexports.setImmediate = setImmediate;\nexports.clearImmediate = clearImmediate;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_timers-browserify@2.0.4@timers-browserify/main.js\n// module id = 22\n// module chunks = 0","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6–8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_setimmediate@1.0.5@setimmediate/setImmediate.js\n// module id = 23\n// module chunks = 0","import Command from './command'\r\nimport {debug} from './common'\r\nimport {HTTPParser} from './http-parser'\r\n\r\nexport default class ClientCommand extends Command {\r\n    constructor(connection, id) {\r\n        super(connection, id, HTTPParser.RESPONSE);\r\n        let n = this.app.maxHeadersCount;\r\n        // Propagate headers limit from server instance to parser\r\n        if (n && typeof n === 'number') {\r\n            this._parser.maxHeaderPairs = n << 1;\r\n        } else {\r\n            // Set default value because parser may be reused from FreeList\r\n            this._parser.maxHeaderPairs = 2000;\r\n        }\r\n        this._id = id;\r\n        this._client_request = null;\r\n\r\n    }\r\n    setFlush(request) {\r\n        this._client_request = request;\r\n        let req = this._client_request;\r\n        let cmd = this;\r\n        req.on('write', function (data, encoding, callback) {\r\n            cmd.write(data, encoding);\r\n            if (callback) {\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n    _parserOnIncoming(res, shouldKeepAlive) {\r\n        let req = this._client_request;\r\n        if (req === null) {\r\n            debug('No request corresponded to the response : CSeq ', this._id);\r\n            return -1;\r\n        }\r\n        req.clearTimeout();\r\n        req.emit('response', res);\r\n\r\n        return 0;\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client_command.js","import url from 'url'\r\nimport * as Common from './common'\r\nimport OutgoingMessage from './http_outgoing'\r\nimport util from 'util'\r\nimport {Base64} from 'js-base64'\r\nimport * as HttpWsError from './errors'\r\n\r\nconst debug = Common.debug;\r\nconst outHeadersKey = Common.outHeadersKey;\r\n\r\nvar _request_counter = 0;\r\n\r\n// The actual list of disallowed characters in regexp form is more like:\r\n//    /[^A-Za-z0-9\\-._~!$&'()*+,;=/:@]/\r\n// with an additional rule for ignoring percentage-escaped characters, but\r\n// that's a) hard to capture in a regular expression that performs well, and\r\n// b) possibly too restrictive for real-world usage. So instead we restrict the\r\n// filter to just control characters and spaces.\r\n//\r\n// This function is used in the case of small paths, where manual character code\r\n// checks can greatly outperform the equivalent regexp (tested in V8 5.4).\r\nfunction isInvalidPath(s) {\r\n    let i = 0;\r\n    if (s.charCodeAt(0) <= 32) return true;\r\n    if (++i >= s.length) return false;\r\n    if (s.charCodeAt(1) <= 32) return true;\r\n    if (++i >= s.length) return false;\r\n    if (s.charCodeAt(2) <= 32) return true;\r\n    if (++i >= s.length) return false;\r\n    if (s.charCodeAt(3) <= 32) return true;\r\n    if (++i >= s.length) return false;\r\n    if (s.charCodeAt(4) <= 32) return true;\r\n    if (++i >= s.length) return false;\r\n    if (s.charCodeAt(5) <= 32) return true;\r\n    ++i;\r\n    for (; i < s.length; ++i)\r\n        if (s.charCodeAt(i) <= 32) return true;\r\n    return false;\r\n}\r\n\r\nfunction validateHost(host, name) {\r\n    if (host !== null && typeof host !== 'string') {\r\n        throw new HttpWsError.TypeError('ERR_INVALID_ARG_TYPE', `options.${name}`, ['string', 'undefined', 'null'], host);\r\n    }\r\n    return host;\r\n}\r\n\r\nfunction url2options(Url) {\r\n    //find virtual hostname {xxxx}\r\n    let line = Url;\r\n    let xpath = null;\r\n    let begin = line.indexOf('://{');\r\n    if (begin !== -1) {\r\n        let end = line.indexOf('}');\r\n        if (end === -1) {\r\n            debug('invalid url(without }end for hostname) :', line);\r\n            return null;\r\n        }\r\n        xpath = line.slice(begin + 4, end);\r\n        line = line.slice(0, begin + 3) + '.' + line.slice(end + 1);\r\n    }\r\n\r\n    let options = url.parse(line);\r\n\r\n    if (xpath) {\r\n        options.host = xpath;\r\n        options.hostname = null;\r\n        let href = options.href;\r\n        if (href) {\r\n            let n = href.indexOf('://./');\r\n            if (n !== -1) {\r\n                options.href = href.slice(0, n + 3) + `{${xpath}}` + href.slice(n + 4);\r\n            }\r\n        }\r\n    } else {\r\n        options.host = options.hostname\r\n    }\r\n    return options;\r\n}\r\n\r\nexport default class ClientRequest extends OutgoingMessage {\r\n    constructor(options, cb) {\r\n        super();\r\n\r\n        if (typeof options === 'string') {\r\n            options = url2options(options);\r\n            if (options.hostname !== null && !options.hostname) {\r\n                throw new Error('ERR_INVALID_DOMAIN_NAME');\r\n            }\r\n        } else {\r\n            options = util._extend({}, options);\r\n            if (!options.host) {\r\n                options.host = options.hostname;\r\n            }\r\n        }\r\n\r\n        let protocol = options.protocol || 'http:';\r\n        let expectedProtocol = 'http:';\r\n\r\n        let path;\r\n        if (options.path) {\r\n            path = '' + options.path;\r\n            let invalidPath;\r\n            if (path.length <= 39) { // Determined experimentally in V8 5.4\r\n                invalidPath = isInvalidPath(path);\r\n            } else {\r\n                invalidPath = /[\\u0000-\\u0020]/.test(path);\r\n            }\r\n            if (invalidPath)\r\n                throw new HttpWsError.TypeError('ERR_UNESCAPED_CHARACTERS', 'Request path');\r\n        }\r\n\r\n        if (protocol !== expectedProtocol) {\r\n            throw new Error('ERR_INVALID_PROTOCOL', protocol, expectedProtocol);\r\n        }\r\n\r\n        let defaultPort = 80;\r\n        let port = options.port = options.port || defaultPort;\r\n        let host = options.host = validateHost(options.host, 'host') || validateHost(options.hostname, 'hostname') || 'localhost';\r\n\r\n\r\n        let setHost = (options.setHost === undefined);\r\n\r\n        this.timeout = options.timeout ? options.timeout : 2 * 60 * 1000;\r\n\r\n        let method = options.method;\r\n        let methodIsString = (typeof method === 'string');\r\n        if (method !== null && !methodIsString) {\r\n            throw new Error('ERR_INVALID_ARG_TYPE', 'method',\r\n                'string', method);\r\n        }\r\n\r\n        if (methodIsString && method) {\r\n            if (!Common._checkIsHttpToken(method)) {\r\n                throw new Error('ERR_INVALID_HTTP_TOKEN', 'Method');\r\n            }\r\n            method = this.method = method.toUpperCase();\r\n        } else {\r\n            method = this.method = 'GET';\r\n        }\r\n\r\n        this.path = options.path || '/';\r\n        if (cb) {\r\n            this.once('response', cb);\r\n        }\r\n\r\n        let headersArray = Array.isArray(options.headers);\r\n        if (!headersArray) {\r\n            if (options.headers) {\r\n                let keys = Object.keys(options.headers);\r\n                for (let i = 0; i < keys.length; i++) {\r\n                    let key = keys[i];\r\n                    this.setHeader(key, options.headers[key]);\r\n                }\r\n            }\r\n\r\n            if (host && !this.getHeader('host') && setHost) {\r\n                let hostHeader = host;\r\n\r\n                // For the Host header, ensure that IPv6 addresses are enclosed\r\n                // in square brackets, as defined by URI formatting\r\n                // https://tools.ietf.org/html/rfc3986#section-3.2.2\r\n                let posColon = hostHeader.indexOf(':');\r\n                if (posColon !== -1 &&\r\n                    hostHeader.indexOf(':', posColon + 1) !== -1 &&\r\n                    hostHeader.charCodeAt(0) !== 91 /*'['*/ ) {\r\n                    hostHeader = `[${hostHeader}]`;\r\n                }\r\n\r\n                if (port && +port !== defaultPort) {\r\n                    hostHeader += ':' + port;\r\n                }\r\n                this.setHeader('Host', hostHeader);\r\n                // console.log('%%', hostHeader)\r\n            }\r\n        }\r\n\r\n        if (options.auth && !this.getHeader('Authorization')) {\r\n            this.setHeader('Authorization', 'Basic ' + Base64.encode(options.auth));\r\n        }\r\n        /*\r\n          if (method === 'GET' ||\r\n              method === 'HEAD' ||\r\n              method === 'DELETE' ||\r\n              method === 'OPTIONS' ||\r\n              method === 'CONNECT') {\r\n            this.useChunkedEncodingByDefault = false;\r\n          } else {\r\n            this.useChunkedEncodingByDefault = true;\r\n          }\r\n        */\r\n        this.useChunkedEncodingByDefault = false;\r\n\r\n        if (headersArray) {\r\n            this._storeHeader(this.method + ' ' + this.path + ' HTTP/1.1\\r\\n',\r\n                options.headers);\r\n        } else if (this.getHeader('expect')) {\r\n            if (this._header) {\r\n                throw new Error('ERR_HTTP_HEADERS_SENT');\r\n            }\r\n\r\n            this._storeHeader(this.method + ' ' + this.path + ' HTTP/1.1\\r\\n',\r\n                this[outHeadersKey]);\r\n        }\r\n\r\n        this._ended = false;\r\n        this.res = null;\r\n        this.aborted = undefined;\r\n        this.timeoutCb = null;\r\n        this.upgradeOrConnect = false;\r\n        this.parser = null;\r\n        this.maxHeadersCount = null;\r\n\r\n        this._obuf = null;\r\n        var id = ++_request_counter ? _request_counter : _request_counter = 1;\r\n        this.setHeader('CSeq', id);\r\n        let called = false;\r\n\r\n        //this.once('release', this.release);\r\n        let req = this;\r\n        this.timeout_handler = setTimeout(function () {\r\n            req.emit('timeout_notify');\r\n        }, this.timeout);\r\n    }\r\n\r\n    _finish() {\r\n        DTRACE_HTTP_CLIENT_REQUEST(this, this.connection);\r\n        LTTNG_HTTP_CLIENT_REQUEST(this, this.connection);\r\n        COUNTER_HTTP_CLIENT_REQUEST();\r\n        OutgoingMessage.prototype._finish.call(this);\r\n    }\r\n\r\n    _implicitHeader() {\r\n        if (this._header) {\r\n            throw new HttpWsError.Error('ERR_HTTP_HEADERS_SENT', 'render');\r\n        }\r\n        this._storeHeader(this.method + ' ' + this.path + ' HTTP/1.1\\r\\n',\r\n            this[outHeadersKey]);\r\n    }\r\n\r\n    release() {\r\n        globalAgent.RemoveRequestByReq(this);\r\n        this.emit('timeout_notify');\r\n    }\r\n\r\n    close() {\r\n    }\r\n\r\n    clearTimeout() {\r\n        if (this.timeout_handler != null) {\r\n            clearTimeout(this.timeout_handler);\r\n        }\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client_request.js","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_url@0.11.0@url/url.js\n// module id = 26\n// module chunks = 0","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_punycode@1.4.1@punycode/punycode.js\n// module id = 27\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif(!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 28\n// module chunks = 0","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_url@0.11.0@url/util.js\n// module id = 29\n// module chunks = 0","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_querystring-es3@0.2.1@querystring-es3/index.js\n// module id = 30\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_querystring-es3@0.2.1@querystring-es3/decode.js\n// module id = 31\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_querystring-es3@0.2.1@querystring-es3/encode.js\n// module id = 32\n// module chunks = 0","/*\n * $Id: base64.js,v 2.15 2014/04/05 12:58:57 dankogai Exp dankogai $\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n */\n\n(function(global) {\n    'use strict';\n    // existing version for noConflict()\n    var _Base64 = global.Base64;\n    var version = \"2.3.2\";\n    // if node.js, we use Buffer\n    var buffer;\n    if (typeof module !== 'undefined' && module.exports) {\n        try {\n            buffer = require('buffer').Buffer;\n        } catch (err) {}\n    }\n    // constants\n    var b64chars\n        = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    var b64tab = function(bin) {\n        var t = {};\n        for (var i = 0, l = bin.length; i < l; i++) t[bin.charAt(i)] = i;\n        return t;\n    }(b64chars);\n    var fromCharCode = String.fromCharCode;\n    // encoder stuff\n    var cb_utob = function(c) {\n        if (c.length < 2) {\n            var cc = c.charCodeAt(0);\n            return cc < 0x80 ? c\n                : cc < 0x800 ? (fromCharCode(0xc0 | (cc >>> 6))\n                                + fromCharCode(0x80 | (cc & 0x3f)))\n                : (fromCharCode(0xe0 | ((cc >>> 12) & 0x0f))\n                   + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\n                   + fromCharCode(0x80 | ( cc         & 0x3f)));\n        } else {\n            var cc = 0x10000\n                + (c.charCodeAt(0) - 0xD800) * 0x400\n                + (c.charCodeAt(1) - 0xDC00);\n            return (fromCharCode(0xf0 | ((cc >>> 18) & 0x07))\n                    + fromCharCode(0x80 | ((cc >>> 12) & 0x3f))\n                    + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\n                    + fromCharCode(0x80 | ( cc         & 0x3f)));\n        }\n    };\n    var re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n    var utob = function(u) {\n        return u.replace(re_utob, cb_utob);\n    };\n    var cb_encode = function(ccc) {\n        var padlen = [0, 2, 1][ccc.length % 3],\n        ord = ccc.charCodeAt(0) << 16\n            | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)\n            | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0)),\n        chars = [\n            b64chars.charAt( ord >>> 18),\n            b64chars.charAt((ord >>> 12) & 63),\n            padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\n            padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\n        ];\n        return chars.join('');\n    };\n    var btoa = global.btoa ? function(b) {\n        return global.btoa(b);\n    } : function(b) {\n        return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\n    };\n    var _encode = buffer ?\n        buffer.from && buffer.from !== Uint8Array.from ? function (u) {\n            return (u.constructor === buffer.constructor ? u : buffer.from(u))\n                .toString('base64')\n        }\n        :  function (u) {\n            return (u.constructor === buffer.constructor ? u : new  buffer(u))\n                .toString('base64')\n        }\n        : function (u) { return btoa(utob(u)) }\n    ;\n    var encode = function(u, urisafe) {\n        return !urisafe\n            ? _encode(String(u))\n            : _encode(String(u)).replace(/[+\\/]/g, function(m0) {\n                return m0 == '+' ? '-' : '_';\n            }).replace(/=/g, '');\n    };\n    var encodeURI = function(u) { return encode(u, true) };\n    // decoder stuff\n    var re_btou = new RegExp([\n        '[\\xC0-\\xDF][\\x80-\\xBF]',\n        '[\\xE0-\\xEF][\\x80-\\xBF]{2}',\n        '[\\xF0-\\xF7][\\x80-\\xBF]{3}'\n    ].join('|'), 'g');\n    var cb_btou = function(cccc) {\n        switch(cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                |    ((0x3f & cccc.charCodeAt(1)) << 12)\n                |    ((0x3f & cccc.charCodeAt(2)) <<  6)\n                |     (0x3f & cccc.charCodeAt(3)),\n            offset = cp - 0x10000;\n            return (fromCharCode((offset  >>> 10) + 0xD800)\n                    + fromCharCode((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return fromCharCode(\n                ((0x0f & cccc.charCodeAt(0)) << 12)\n                    | ((0x3f & cccc.charCodeAt(1)) << 6)\n                    |  (0x3f & cccc.charCodeAt(2))\n            );\n        default:\n            return  fromCharCode(\n                ((0x1f & cccc.charCodeAt(0)) << 6)\n                    |  (0x3f & cccc.charCodeAt(1))\n            );\n        }\n    };\n    var btou = function(b) {\n        return b.replace(re_btou, cb_btou);\n    };\n    var cb_decode = function(cccc) {\n        var len = cccc.length,\n        padlen = len % 4,\n        n = (len > 0 ? b64tab[cccc.charAt(0)] << 18 : 0)\n            | (len > 1 ? b64tab[cccc.charAt(1)] << 12 : 0)\n            | (len > 2 ? b64tab[cccc.charAt(2)] <<  6 : 0)\n            | (len > 3 ? b64tab[cccc.charAt(3)]       : 0),\n        chars = [\n            fromCharCode( n >>> 16),\n            fromCharCode((n >>>  8) & 0xff),\n            fromCharCode( n         & 0xff)\n        ];\n        chars.length -= [0, 0, 2, 1][padlen];\n        return chars.join('');\n    };\n    var atob = global.atob ? function(a) {\n        return global.atob(a);\n    } : function(a){\n        return a.replace(/[\\s\\S]{1,4}/g, cb_decode);\n    };\n    var _decode = buffer ?\n        buffer.from && buffer.from !== Uint8Array.from ? function(a) {\n            return (a.constructor === buffer.constructor\n                    ? a : buffer.from(a, 'base64')).toString();\n        }\n        : function(a) {\n            return (a.constructor === buffer.constructor\n                    ? a : new buffer(a, 'base64')).toString();\n        }\n        : function(a) { return btou(atob(a)) };\n    var decode = function(a){\n        return _decode(\n            String(a).replace(/[-_]/g, function(m0) { return m0 == '-' ? '+' : '/' })\n                .replace(/[^A-Za-z0-9\\+\\/]/g, '')\n        );\n    };\n    var noConflict = function() {\n        var Base64 = global.Base64;\n        global.Base64 = _Base64;\n        return Base64;\n    };\n    // export Base64\n    global.Base64 = {\n        VERSION: version,\n        atob: atob,\n        btoa: btoa,\n        fromBase64: decode,\n        toBase64: encode,\n        utob: utob,\n        encode: encode,\n        encodeURI: encodeURI,\n        btou: btou,\n        decode: decode,\n        noConflict: noConflict\n    };\n    // if ES5 is available, make Base64.extendString() available\n    if (typeof Object.defineProperty === 'function') {\n        var noEnum = function(v){\n            return {value:v,enumerable:false,writable:true,configurable:true};\n        };\n        global.Base64.extendString = function () {\n            Object.defineProperty(\n                String.prototype, 'fromBase64', noEnum(function () {\n                    return decode(this)\n                }));\n            Object.defineProperty(\n                String.prototype, 'toBase64', noEnum(function (urisafe) {\n                    return encode(this, urisafe)\n                }));\n            Object.defineProperty(\n                String.prototype, 'toBase64URI', noEnum(function () {\n                    return encode(this, true)\n                }));\n        };\n    }\n    //\n    // export Base64 to the namespace\n    //\n    if (global['Meteor']) { // Meteor.js\n        Base64 = global.Base64;\n    }\n    // module.exports and AMD are mutually exclusive.\n    // module.exports has precedence.\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports.Base64 = global.Base64;\n    }\n    else if (typeof define === 'function' && define.amd) {\t\t\n        // AMD. Register as an anonymous module.\t\n        define([], function(){ return global.Base64 });\n    }\n    // that's it!\n})(   typeof self   !== 'undefined' ? self\n    : typeof window !== 'undefined' ? window\n    : typeof global !== 'undefined' ? global\n    : this\n);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_js-base64@2.3.2@js-base64/base64.js\n// module id = 33\n// module chunks = 0","import EventEmitter from './EventEmitter'\r\nimport * as Connection from './connection'\r\nimport { Buffer } from 'Buffer'\r\nimport * as Common from './common'\r\n\r\nclass Client　extends EventEmitter {\r\n    constructor(requestListener) {\r\n        super();\r\n        if (!(this instanceof Client)) return new Client();\r\n        if (requestListener) {\r\n            this.on('request', requestListener);\r\n            this._requestListener = requestListener;\r\n        }\r\n    }\r\n\r\n    connect(url) {\r\n        let index = url.lastIndexOf('/');\r\n        if (index == -1) {\r\n            throw new Error('INVALID_URL_WITHOUT_PATH');\r\n        }\r\n        let name = url.slice(index + 1);\r\n        if (Connection.getConnection(name)) {\r\n            return true;\r\n        }\r\n        const ws = new WebSocket(url);\r\n        let client = this;\r\n\r\n        ws.onopen = function (id_name) {\r\n            return function () {\r\n                ws.binaryType = 'arraybuffer';\r\n                let new_conn = new Connection.Connection(ws, client);\r\n                Connection.addConnection(id_name, new_conn);\r\n                client.emit('onconnect');\r\n            }\r\n        }(name);\r\n\r\n        ws.onmessage = function (id_name) {\r\n            return function (data) {\r\n                let chunk;\r\n\r\n                chunk = Buffer.from(data.data);\r\n\r\n                let conn = Connection.getConnection(id_name);\r\n                if (conn) {\r\n                    conn.emit('chunk', chunk);\r\n                }\r\n            }\r\n        }(name);\r\n\r\n        ws.onclose = function (id_name) {\r\n            return function () {\r\n                Connection.removeConnection(id_name);\r\n            }\r\n        }(name);\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\nexport default Client\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/client.js"],"sourceRoot":""}